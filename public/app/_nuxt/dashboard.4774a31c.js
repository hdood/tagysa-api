import{G as $,x as z,J as B,l as m,m as V,o as c,f,z as o,t as u,i as e,A as p,u as n,D as N,F as C,B as S,H as T,L as D,T as L,C as M}from"./entry.91eada8e.js";import H from"./Icon.4fed1372.js";import{_ as A}from"./nuxt-link.11fdcf30.js";import{_ as F}from"./LinkCardModal.3456b889.js";import{C as P}from"./auto.1f697c56.js";import R from"./AdminLayout.20168c2c.js";import"./config.fb914ae5.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./TextInput.607fee85.js";import"./links.e52850d8.js";import"./transition.3f8552f5.js";import"./micro-task.fdb478dd.js";import"./Logo.937e8524.js";import"./BottomNavigation.109e04de.js";import"./ShareModal.42b104df.js";import"./Button.vue.d78353b3.js";import"./ConfirmModal.vue.e8aac48c.js";import"./auth.2ab643e9.js";const E=e("title",null,"Dashboard",-1),G={class:"max-w-7xl mt-10 mx-auto flex justify-between"},I={class:"flex items-center w-full flex-wrap gap-5 justify-center lg:justify-start"},J={class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},O={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},U={class:"flex flex-col justify-center align-middle"},q={class:"text-3xl font-semibold leadi"},K=e("p",{class:"capitalize"},"Cards",-1),Q={class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},W={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},X={class:"flex flex-col justify-center align-middle"},Y={class:"text-3xl font-semibold leadi"},Z=e("p",{class:"capitalize"},"Taps",-1),ee={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},te=e("div",{class:"flex flex-col justify-center align-middle"},[e("p",{class:"text-3xl font-semibold leadi"},"Products")],-1),se={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},oe=e("div",{class:"flex flex-col justify-center align-middle"},[e("p",{class:"text-3xl font-semibold leadi"},"Settings")],-1),le={class:"max-w-7xl mx-auto my-5 flex gap-4 flex-wrap lg:flex-nowrap"},ae={class:"flex flex-col gap-5 p-5 rounded-lg bg-base-200 lg:w-[60rem] w-full items-center"},ie={class:"flex justify-between w-full"},ne=e("h1",{class:"text-2xl font-medium"}," Cards ",-1),de={class:"w-full max-h-96 overflow-auto"},re={key:0,class:"flex flex-col gap-3"},ce=["onClick"],fe={class:"flex items-center gap-2"},me={key:1},ue={class:"flex text-center flex-col items-center gap-3"},pe={class:"text-xl font-medium"},_e={class:"w-full overflow-hidden rounded-lg flex flex-col items-start gap-8"},xe=e("div",{class:"lg:w-[40rem] text-3xl font-medium text-base-content"},"Views",-1),ge={class:"lg:w-[40rem]",id:"chart-wrapper"},Ae={__name:"dashboard",setup(ve){const k=$().provide.axios,{user:d}=z(B()),_=m(!1),x=m({});m([]);const g=m(!1),b=m(null);let w=!0;async function h(){var v,i;const t=(await k("/api/analytics/"+((i=(v=x.value)==null?void 0:v.profile)==null?void 0:i.id))).data.visits;g.value=new P(b.value,{type:"bar",data:{labels:t.map(s=>s.period),datasets:[{label:"Views",data:t.map(s=>s.count)}]},options:{plugins:{customCanvasBackgroundColor:{color:localStorage.getItem("tagysa-theme")=="winter"?"white":"black"}}},plugins:[{id:"customCanvasBackgroundColor",beforeDraw:(s,y,l)=>{const{ctx:r}=s;r.save(),r.globalCompositeOperation="destination-over",r.fillStyle=l.color||"#99ffff",r.fillRect(0,0,s.width,s.height),r.restore()}}]})}V(async()=>{var a,t;x.value=(t=(a=d.value)==null?void 0:a.cards)==null?void 0:t[0],h()});async function j(a){if(w&&(w=!1,!!g.value&&b.value)){x.value=a;try{g.value.stop(),g.value.destroy(),h()}catch(t){alert(t)}setTimeout(()=>w=!0,1e3)}}return(a,t)=>{const v=T,i=H,s=A,y=F;return c(),f(C,null,[o(v,null,{default:u(()=>[E]),_:1}),o(R,null,{default:u(()=>[e("div",G,[e("div",I,[e("div",J,[e("div",O,[o(i,{name:"solar:card-bold",size:"35"})]),e("div",U,[e("p",q,p(n(d).cards.length),1),K])]),e("div",Q,[e("div",W,[o(i,{name:"mingcute:finger-tap-fill",size:"35"})]),e("div",X,[e("p",Y,p(n(d).views),1),Z])]),o(s,{to:"/products",class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},{default:u(()=>[e("div",ee,[o(i,{name:"mdi:cart",size:"35"})]),te]),_:1}),o(s,{to:"/account",class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},{default:u(()=>[e("div",se,[o(i,{name:"material-symbols:settings",size:"35"})]),oe]),_:1})])]),e("div",le,[e("div",ae,[o(y,{show:n(_),onClose:t[0]||(t[0]=l=>_.value=!1)},null,8,["show"]),e("div",ie,[ne,n(d).cards.length!=0?(c(),f("button",{key:0,onClick:t[1]||(t[1]=l=>_.value=!0),class:"btn btn-sm btn-info"}," + ")):N("",!0)]),e("div",de,[n(d).cards.length!=0?(c(),f("div",re,[(c(!0),f(C,null,S(n(d).cards,l=>(c(),f("div",{onClick:r=>j(l)},[e("div",{class:D(["bg-primary p-4 rounded text-primary-content flex items-center justify-between gap-2 cursor-pointer",[l.id==n(x).id&&"border-2 border-base"]])},[e("div",fe,[o(i,{name:"solar:card-bold",size:"30"}),e("div",null,p(l.name),1)]),e("div",{onClick:t[2]||(t[2]=L(()=>{},["stop"]))},[o(s,{to:"/profile/"+l.id,class:"btn btn-base"},{default:u(()=>[M(" edit Profile ")]),_:2},1032,["to"])])],2)],8,ce))),256))])):(c(),f("div",me,[e("div",ue,[e("span",pe,p(a.$t("noCards")),1),e("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=l=>_.value=!0)},p(a.$t("linkCard")),1)])]))])]),e("div",_e,[xe,e("div",ge,[e("canvas",{class:"lg:w-[40rem]",ref_key:"canvas",ref:b,id:"visitors"},null,512)])])])]),_:1})],64)}}};export{Ae as default};
