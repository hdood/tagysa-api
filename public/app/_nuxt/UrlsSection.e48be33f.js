var E=Object.defineProperty;var T=(u,e,a)=>e in u?E(u,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[e]=a;var x=(u,e,a)=>(T(u,typeof e!="symbol"?e+"":e,a),a);import V from"./Icon.82aece9d.js";import{_ as U}from"./Button.vue.6778f305.js";import{_ as q}from"./ConfirmModal.vue.737e0aad.js";import{a2 as I,K as G,L as J,l as i,G as $,x as C,U as K,o as g,f as L,z as l,u as s,i as t,A as D,t as m,m as F,y as O,c as H,O as N}from"./entry.458b6613.js";import{u as b}from"./profile.eed1ce75.js";import{_ as Q}from"./TextInput.d1c4a237.js";import{q as W,h as R,U as X,Y as Z,S as ee}from"./transition.0bced354.js";import"./links.4339175c.js";import{d as te}from"./vuedraggable.umd.28499139.js";import"./config.2982fd22.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./micro-task.83daa364.js";import"./_commonjsHelpers.042e6b4d.js";const se=I(),k=G(se).provide.axios;class le{constructor(){x(this,"all",i([]));x(this,"addLink",async(e,a,o,_)=>{await k.post("/api/urls/"+_,{name:e,link:a,order:o}),$().refreshFrame()});x(this,"getAllLinks",async e=>{let a=await k.get("/api/urls/"+e);this.all.value=a.data});x(this,"deleteLink",async e=>{await k.delete(`/api/urls/${e}`)});x(this,"reorder",async()=>{const e=Array.from(this.all.value,(a,o)=>({id:a.id,order:o}));k.post("/api/urls/reorder",{urls:JSON.stringify(e)}),$().refreshFrame()});x(this,"updateLink",async(e,a,o)=>{await k.patch(`/api/urls/${e}`,{name:a,url:o})})}}const A=J("urls",()=>new le),ae={class:"w-full rounded-xl px-2 flex flex-col bg-base-300 p-2 shadow text-base-content"},oe={class:"flex items-center gap-3 justify-between"},ne={class:"flex items-center gap-5"},ie={class:"flex gap-2 items-center"},re={class:"text-xs"},ce={class:"flex gap-2 items-center"},de={__name:"Url",props:{link:Object},emits:["updatedInput"],setup(u,{emit:e}){const a=u,o=$(),_=A(),r=i(!1),{activeProfile:c}=C(b()),{link:n}=K(a);async function p(){try{await _.deleteLink(n.value.id),await _.getAllLinks(c.value.id),o.refreshFrame()}catch(v){console.log(v)}}return(v,f)=>{const d=q,y=V,w=U;return g(),L("div",ae,[l(d,{show:s(r),title:"Delete Link",body:"Are you sure you want to delete this link",type:"danger",positive:"Delete",onClose:f[0]||(f[0]=h=>r.value=!1),onConfirm:p},null,8,["show"]),t("div",oe,[t("div",ne,[l(y,{name:"mdi:drag",size:"35",class:"cursor-move handle"}),t("div",ie,[l(y,{size:"40",name:"material-symbols:link"}),t("div",null,[t("div",null,D(s(n).name),1),t("div",re,D(s(n).link),1)])])]),l(w,{type:"danger",class:"px-2 h-10 justify-self-end",onClick:f[1]||(f[1]=h=>r.value=!0)},{default:m(()=>[t("div",ce,[l(y,{size:"25",name:"ic:round-delete"})])]),_:1})])])}}},ue=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),me={class:"fixed inset-0 overflow-y-auto"},pe={class:"flex min-h-full items-center justify-center p-4 text-center"},fe=t("span",null,"Add Link",-1),_e={class:""},ve={class:"mt-5 min-h-[10rem] flex flex-col items-center justify-between h-full"},xe={class:"space-y-3"},he={class:"w-full flex justify-end gap-3 my-4"},ye=t("div",{class:"flex items-center"},[t("span",null,"Add Link")],-1),we={__name:"UrlsModal",props:["show"],emits:["close","select"],setup(u,{emit:e}){const a=u,o=A(),_=$(),r=i(""),c=i({}),n=i(""),p=i({}),v=i(!1);i(!1);const{activeProfile:f}=C(b());F(async()=>{await b().fetchProfile(O().params.id)});function d(){n.value="",r.value="",e("close")}async function y(){if(p.value={},n.value==""){p.value={url:["please specify a url for this link"]};return}v.value=!0;try{const w=await o.addLink(r.value,n.value,o.all.length,f.value.id);await o.getAllLinks(f.value.id),n.value="",r.value="",_.refreshFrame()}catch(w){p.value=w.response.data.errors}d(),v.value=!1}return(w,h)=>{const j=Q,Y=U;return g(),H(s(ee),{appear:"",show:a.show,as:"div"},{default:m(()=>[l(s(W),{as:"div",onClose:d,class:"relative z-10"},{default:m(()=>[l(s(R),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:m(()=>[ue]),_:1}),t("div",me,[t("div",pe,[l(s(R),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:m(()=>[l(s(X),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-base-200 p-6 text-left align-middle shadow-xl transition-all"},{default:m(()=>{var z,B,M,P;return[l(s(Z),{as:"div",class:"text-lg font-medium leading-6 text-base-content"},{default:m(()=>[fe]),_:1}),t("div",_e,[t("div",ve,[t("div",xe,[l(j,{class:"w-[20rem]",input:s(n),"onUpdate:input":h[0]||(h[0]=S=>N(n)?n.value=S:null),label:"URL",placeholder:s(c).default,error:(B=(z=s(p))==null?void 0:z.url)==null?void 0:B[0]},null,8,["input","placeholder","error"]),l(j,{class:"w-[20rem]",input:s(r),"onUpdate:input":h[1]||(h[1]=S=>N(r)?r.value=S:null),label:"Name",placeholder:"Display text",error:(P=(M=s(p))==null?void 0:M.text)==null?void 0:P[0]},null,8,["input","error"])]),t("div",he,[t("button",{onClick:d}," Cancel "),l(Y,{class:"px-2 h-10",loading:s(v),type:"primary",onClick:y},{default:m(()=>[ye]),_:1},8,["loading"])])])])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}},ke={class:"w-full"},ge={class:"mx-auto pb-24 py-3 flex flex-col items-center"},$e={key:0,class:"mt-4 px-3 w-full flex justify-between"},be=t("span",{class:"text-2xl opacity-75 font-medium"},"Your Links",-1),Le={class:"flex items-center"},Se={key:1,class:"mt-8 mx-2 text-xl font-medium w-full text-center"},Ue=t("div",null,"You don't have any links",-1),Ce={class:"flex items-center"},Ae=t("span",null,"Add Link",-1),qe={__name:"UrlsSection",setup(u){const e=A();$(),i({name:"Platform",icon:""}),i(""),i(!1),i({});const{activeProfile:a}=C(b()),o=i(!1);async function _(r){await e.reorder()}return F(async()=>{await b().fetchProfile(O().params.id),await e.getAllLinks(a.value.id)}),(r,c)=>{const n=V,p=U,v=de,f=we;return g(),L("div",ke,[t("div",ge,[s(e).all.length!=0?(g(),L("div",$e,[be,t("div",null,[l(p,{type:"info",class:"h-10 w-full px-8 mx-auto",onClick:c[0]||(c[0]=d=>o.value=!0)},{default:m(()=>[t("div",Le,[l(n,{size:"25",name:"material-symbols:add"})])]),_:1})])])):(g(),L("div",Se,[Ue,l(p,{type:"info",class:"h-10 px-8 mx-auto mt-3",onClick:c[1]||(c[1]=d=>o.value=!0)},{default:m(()=>[t("div",Ce,[Ae,l(n,{size:"25",name:"material-symbols:add"})])]),_:1})])),l(s(te),{modelValue:s(e).all,"onUpdate:modelValue":c[2]||(c[2]=d=>s(e).all=d),"component-data":{class:"w-full"},tag:"div","item-key":"nothing",handle:".handle","ghost-class":"bg-base-200",onEnd:_},{item:m(({element:d})=>[l(v,{link:d,class:"mt-3"},null,8,["link"])]),_:1},8,["modelValue"])]),l(f,{show:s(o),onClose:c[3]||(c[3]=d=>o.value=!1)},null,8,["show"])])}}};export{qe as default};
