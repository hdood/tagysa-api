var E=Object.defineProperty,G=(n,e,o)=>e in n?E(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,g=(n,e,o)=>(G(n,typeof e!="symbol"?e+"":e,o),o);const f=n=>{var e;return(e=n==null?void 0:n.clientId)!=null?e:n==null?void 0:n.client_id};class I{constructor({clientId:e,onScriptLoadError:o,onScriptLoadSuccess:t}){g(this,"clientId"),g(this,"scriptLoadedSuccessfully",!1),g(this,"containerHeightMap",{large:"40",medium:"32",small:"20"}),this.clientId=e,!(typeof window>"u")&&this.useLoadGsiScript({onScriptLoadError:o,onScriptLoadSuccess:t})}useLoadGsiScript({onScriptLoadSuccess:e,onScriptLoadError:o}={}){const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,t.onload=()=>{this.scriptLoadedSuccessfully=!0,e&&e()},t.onerror=()=>{this.scriptLoadedSuccessfully=!1,o&&o()},document.body.appendChild(t)}useGoogleLogin(e){return o=>this.useGoogleLoginPostponed(e)(o)}useGoogleLoginPostponed({flow:e="implicit",scope:o="",onSuccess:t,onError:s,onNonOAuthError:d,overrideScope:a,...l}){var i;if(!this.scriptLoadedSuccessfully)return()=>{};const u=e==="implicit"?"initTokenClient":"initCodeClient",r=(i=window.google)==null?void 0:i.accounts.oauth2[u]({client_id:this.clientId,scope:a?o:`openid profile email ${o}`,callback:c=>{if(s&&c.error)return s(c);t&&t(c)},error_callback:c=>{d&&d(c)},...l});return e==="implicit"?c=>r.requestAccessToken(c):()=>r.requestCode()}useGoogleOneTapLogin(e){return()=>{this.useGoogleOneTapLoginPostponed(e)}}useGoogleOneTapLoginPostponed({onError:e,onSuccess:o,hosted_domain:t,cancel_on_tap_outside:s,promptMomentNotification:d}){var a,l;typeof window>"u"||!this.scriptLoadedSuccessfully||((a=window.google)==null||a.accounts.id.initialize({hosted_domain:t,cancel_on_tap_outside:s,client_id:this.clientId,callback:i=>{if(!(i!=null&&i.credential)&&e)return e();const{credential:u,select_by:r}=i;o({select_by:r,credential:u,clientId:f(i)})}}),(l=window.google)==null||l.accounts.id.prompt(d))}useRenderButton(e){return()=>{this.useRenderButtonPostponed(e)}}useRenderButtonPostponed({onSuccess:e,onError:o,useOneTap:t,promptMomentNotification:s,type:d="standard",theme:a="outline",size:l="large",text:i,shape:u,element:r,logo_alignment:c,width:w,locale:L,click_listener:_,...y}){var h,m,S;!this.scriptLoadedSuccessfully||((h=window.google)==null||h.accounts.id.initialize({client_id:this.clientId,callback:p=>{if(!(p!=null&&p.credential)&&o)return o();const{credential:b,select_by:v}=p;e({select_by:v,credential:b,clientId:f(p)})},...y}),r.style.height=this.containerHeightMap[l],(m=window.google)==null||m.accounts.id.renderButton(r,{type:d,size:l,text:i,theme:a,shape:u,width:w,locale:L,logo_alignment:c,click_listener:_}),t&&((S=window.google)==null||S.accounts.id.prompt(s)))}}const P=()=>new Promise((n,e)=>{const o=new I({clientId:"860464000420-fse69s8p5l7egno50pu0ffkor080fl7t.apps.googleusercontent.com",onScriptLoadError:()=>console.log("onScriptLoadError"),onScriptLoadSuccess:()=>n(o)})});export{P as i};
