import{D as N,B as i,x as U,G as m,e as V,P as j,o as C,f as D,p as s,m as d,i as e,Q as H,u as a,L as b,w as $,M as A,j as G,y as _,F as O,H as I}from"./entry.e6451b68.js";import{_ as Q}from"./Logo.38f0ee96.js";import{_ as Y}from"./TextInput.0da3728b.js";import{_ as q}from"./nuxt-link.68db1538.js";import{_ as z}from"./Button.vue.3e562564.js";import{i as J}from"./googleProvider.da8280de.js";import{u as K}from"./social.be2dc4bc.js";import{u as W}from"./auth.207ea71f.js";import{u as X}from"./links.a8879245.js";import"./Icon.2db9e4df.js";import"./config.107b8240.js";import"./_plugin-vue_export-helper.c27b6911.js";const Z=e("title",null,"Login",-1),ee={class:"flex flex-col items-center justify-center gap-4 min-h-screen p-3 bg-base-200"},te={class:"bg-base-100 flex rounded-xl shadow-md overflow-hidden"},oe={class:"flex flex-col items-center justify-center w-full gap-6 py-3 px-7 lg:min-w-fit lg:w-[30rem]"},se=e("div",{class:"space-y-3"},[e("div",{class:"text-2xl font-medium text-center text-primary"},"Login")],-1),ae=e("div",{class:"w-full text-center"},"Or",-1),ne=["onSubmit"],re={class:""},le={class:"form-control w-full max-w-xs"},ie=e("label",{class:"label"},[e("span",{class:"label-text"},"Password")],-1),ue={class:"label"},ce={class:"text-error"},de={class:"label-text-alt link-hover"},pe={class:"text-sm"},Be={__name:"login",setup(me){const y=N(),f=K(),S=W(),L=X(),g=i(null),k=m(),n=i(""),r=i(""),u=i({email:"",password:""}),l=i(!1);U(async()=>{(await J()).useRenderButton({useOneTap:!0,element:g.value,onError:()=>console.error("Failed to render button"),onSuccess:async o=>(l.value=!0,await f.googleLogin(o)?await m().push("/admin"):(f.error="You're not signed up",await m().push("/register")),l.value=!0,!0)})()});const B=V(()=>n.value!=""&&r.value!=""),E=async()=>{var c,t;l.value=!0,u.value={email:"",password:""};try{await S.login(n.value,r.value),await y.getUser(),await L.getAllLinks(),await k.push("/dashboard")}catch(o){console.error(o),u.value=(t=(c=o==null?void 0:o.response)==null?void 0:c.data)==null?void 0:t.errors}l.value=!1};return(c,t)=>{var v,w,x,h;const o=I,P=Q,R=Y,T=q,F=z,M=j("RouterLink");return C(),D(O,null,[s(o,null,{default:d(()=>[Z]),_:1}),e("div",ee,[e("div",null,[s(P,{class:"w-20 h-20"})]),e("div",te,[e("div",oe,[se,e("div",{id:"buttonEL",ref_key:"buttonEl",ref:g},null,512),ae,e("form",{onSubmit:H(E,["prevent"])},[e("div",re,[s(R,{label:"Email",input:a(n),"onUpdate:input":t[0]||(t[0]=p=>b(n)?n.value=p:null),placeholder:"Email eg: test@test.com",error:(w=(v=a(u))==null?void 0:v.email)==null?void 0:w[0]},null,8,["input","error"]),e("div",le,[ie,$(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=p=>b(r)?r.value=p:null),placeholder:"Password",inputType:"email",class:"input input-bordered input-primary w-full max-w-xs"},null,512),[[A,a(r)]]),e("label",ue,[e("span",ce,G((h=(x=a(u))==null?void 0:x.password)==null?void 0:h[0]),1),e("span",de,[s(T,{to:"/forgot-password"},{default:d(()=>[_("Forgot password?")]),_:1})])])])]),s(F,{type:a(B)?"primary":"disabled",loading:a(l),class:"mt-3 w-full"},{default:d(()=>[_("Log in")]),_:1},8,["type","loading"])],40,ne),e("div",pe,[s(M,{to:"/register",class:"underline text-indigo-600"},{default:d(()=>[_("Create account")]),_:1})])])])])],64)}}};export{Be as default};
