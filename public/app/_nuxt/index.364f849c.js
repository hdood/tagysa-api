import{l as u,o as s,f as m,i as e,z as o,t as n,C as V,u as t,s as J,c as d,A as M,D as $,T as G,L as j,x as B,J as K,V as O,e as Q,P as W,F as T,B as H,N as X,m as Z,H as ee}from"./entry.357d2ba9.js";import{_ as D}from"./Button.vue.b7b738c2.js";import{_ as te}from"./CreateSpaceModal.e9e1c541.js";import{_ as se}from"./TextInput.c776514d.js";import ae from"./Icon.89e3ed5b.js";import{_ as oe}from"./nuxt-link.f58e1882.js";import{_ as ne}from"./ConfirmModal.vue.f755853a.js";import{_ as le}from"./SearchInput.ac235261.js";import{u as z}from"./spaces.309b136a.js";import{q as ce,h as I,U as ie,Y as re,S as de}from"./transition.672185f0.js";import"./config.5fdcdd03.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./combobox.ebfe7eba.js";import"./micro-task.22f9df30.js";import"./use-resolve-button-type.08964b80.js";const ue={class:"card min-w-fit bg-primary text-base-100 shadow-lg"},me={class:"card-body"},_e=e("h2",{class:"card-title"},"Create Space!",-1),pe=e("p",null,"Crate a space and save the people",-1),fe={class:"card-actions justify-end"},he={__name:"CreateSpaceCard",setup(k){const r=u(!1);return(x,a)=>{const l=D,p=te;return s(),m("div",ue,[e("div",me,[_e,pe,e("div",fe,[o(l,{type:"primary-content",class:"px-4 h-10",onClick:a[0]||(a[0]=v=>r.value=!0)},{default:n(()=>[V("Create")]),_:1})])]),o(p,{show:t(r),onClose:a[1]||(a[1]=v=>r.value=!1)},null,8,["show"])])}}},ve=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ye={class:"fixed inset-0 overflow-y-auto"},xe={class:"flex min-h-full items-center justify-center p-4 text-center"},ge=e("span",null,"Add User",-1),we=["data-theme"],be={class:"card-body"},$e={class:"card-title"},ke={class:"flex gap-3 items-center"},Ce={class:"avatar"},Se={class:"w-16 rounded"},Ne=["src"],Ae={class:"font-medium"},Me={class:"font-medium text-xs"},ze={class:"card-actions justify-end"},Ue=["href"],je=["onSubmit"],Be=e("div",{class:"label-text"},"Search by name",-1),Te={class:"avatar"},Ve={class:"w-8 rounded"},De=["src","alt"],Ie={class:"w-full flex justify-end mt-4"},He={__name:"AddSpaceUserModal",props:["show"],emits:["close","add"],setup(k,{emit:r}){const x=k;z(),u("");const a=u(!1),l=u(!1);async function p(){r("add",l.value.name),r("close")}function v(g){l.value=g}function C(){r("close")}return(g,y)=>{const S=J("CheckIcon"),_=le,c=D;return s(),d(t(de),{appear:"",show:x.show,as:"template"},{default:n(()=>[o(t(ce),{as:"div",onClose:C,class:"relative z-10"},{default:n(()=>[o(t(I),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>[ve]),_:1}),e("div",ye,[e("div",xe,[o(t(I),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[o(t(ie),{class:"w-full max-w-md h-full flex flex-col transform rounded-2xl bg-base-200 p-6 text-left align-middle shadow-xl transition-all"},{default:n(()=>[o(t(re),{as:"h3",class:"text-lg font-medium text-base-content mb-7"},{default:n(()=>[ge]),_:1}),t(l)?(s(),m("div",{key:0,class:"card shadow-md text-base-content max-w-sm lg:max-w-lg mb-4","data-theme":t(l).theme},[e("div",be,[e("div",$e,[e("div",ke,[e("div",Ce,[e("div",Se,[e("img",{src:t(l).image,alt:"Tailwind-CSS-Avatar-component"},null,8,Ne)])]),e("div",null,[e("div",Ae,M(t(l).name),1),e("div",Me,M(t(l).email),1)])])]),e("div",ze,[e("a",{class:"btn btn-primary",href:"/"+t(l).name,target:"_blank"},"Profile",8,Ue)])])],8,we)):$("",!0),e("form",{onSubmit:G(p,["prevent"])},[Be,o(_,{onSelect:v,"combobox-classes":"absolute mt-4 left-3 lg:left-0 max-h-60 max-w-md min-w-[17rem] lg:min-w-[15rem] flex flex-col overflow-auto rounded-md bg-base-200 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-50"},{default:n(({active:w,user:f,selected:N})=>[e("li",{class:j(["relative flex items-center gap-3 select-none py-2 pl-10 px-4 w-11/12 rounded-md cursor-pointer",{"bg-primary text-primary-content":w}])},[e("div",Te,[e("div",Ve,[e("img",{src:f.image,alt:`${f.name} profile image`},null,8,De)])]),e("span",{class:j(["block truncate",{"font-medium":N,"font-normal":!N}])},M(f.name),3),N?(s(),m("span",{key:0,class:j(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":w,"text-teal-600":!w}])},[o(S,{class:"h-5 w-5","aria-hidden":"true"})],2)):$("",!0)],2)]),_:1}),e("div",Ie,[o(c,{type:t(l).name?"primary":"disabled",class:"h-10 px-3",loading:t(a)},{default:n(()=>[V(" Add user ")]),_:1},8,["type","loading"])])],40,je)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}},Le=["data-theme"],Re={class:"card-body"},qe={key:1,class:"card-title"},Fe={class:"avatar-group -space-x-3"},Pe={class:"avatar"},Ye={class:"w-8"},Ee=["src"],Je={key:0,class:"avatar placeholder"},Ge={class:"w-8 bg-neutral-focus text-neutral-content test-sm"},Ke={class:"card-actions justify-between mt-3"},Oe={class:"flex gap-3"},Qe={class:"flex gap-2 items-center"},We={class:"flex gap-2 items-center"},Xe={class:"flex gap-2 items-center"},Ze={class:"flex gap-2 items-center"},et={__name:"SpaceCard",props:["space"],setup(k){const r=k,x=B(K()),{space:a}=O(r),{destroy:l,fetchAll:p,attachUser:v,update:C}=z(),{spaces:g}=B(z()),y=u(!1),S=u(!1),_=u(""),c=u(!1),w=u(!1),f=u("");async function N(){await l(a.value.id),await p()}async function L(U){await v(a.value.id,U),await p()}const R=Q(()=>a.value.users.slice(0,3));async function q(){if(f.value="",!c.value){c.value=!0;return}if(_.value==""){f.value="space name cannot be empty";return}if(_.value==a.value.name){c.value=!1;return}if(g.value.find(i=>i.name==_.value)){f.value="space already existing";return}w.value=!0,await C({id:a.value.id,name:_.value}),await p(),w.value=!1,c.value=!1}return(U,i)=>{const F=se,b=ae,A=D,P=oe,Y=ne,E=He;return s(),m("div",{class:"card min-w-fit text-base-content bg-base-200 border shadow-lg","data-theme":t(x).theme},[e("div",Re,[t(c)?(s(),d(F,{key:0,input:t(_),"onUpdate:input":i[0]||(i[0]=h=>W(_)?_.value=h:null),label:"Name",error:t(f)},null,8,["input","error"])):(s(),m("h2",qe,M(t(a).name),1)),e("div",Fe,[(s(!0),m(T,null,H(t(R),h=>(s(),m("div",Pe,[e("div",Ye,[e("img",{src:h.image},null,8,Ee)])]))),256)),t(a).users.length!=1?(s(),m("div",Je,[e("div",Ge,[e("span",null," +"+M(t(a).users.length),1)])])):$("",!0)]),e("div",Ke,[e("div",Oe,[!t(c)&&!t(a).default?(s(),d(A,{key:0,type:"danger",class:"px-2 h-10 justify-self-end",onClick:i[1]||(i[1]=h=>y.value=!0)},{default:n(()=>[e("div",Qe,[o(b,{size:"25",name:"ic:round-delete"})])]),_:1})):$("",!0),o(A,{type:t(c)?"success":"accent",class:"px-2 h-10 justify-self-end",onClick:q},{default:n(()=>[e("div",We,[t(c)?(s(),d(b,{key:0,size:"25",name:"fluent:checkmark-12-filled"})):(s(),d(b,{key:1,size:"25",name:"material-symbols:edit"}))])]),_:1},8,["type"]),t(c)?(s(),d(A,{key:1,type:"danger",class:"px-2 h-10 justify-self-end",onClick:i[2]||(i[2]=h=>c.value=!1)},{default:n(()=>[e("div",Xe,[t(c)?(s(),d(b,{key:0,size:"25",name:"ph:x-bold"})):(s(),d(b,{key:1,size:"25",name:"material-symbols:edit"}))])]),_:1})):$("",!0),t(c)?$("",!0):(s(),d(A,{key:2,type:"primary",class:"px-2 h-10 justify-self-end",onClick:i[3]||(i[3]=h=>S.value=!0)},{default:n(()=>[e("div",Ze,[o(b,{size:"25",name:"mdi:user-add"})])]),_:1}))]),o(P,{to:`/admin/space/${t(a).name}`},{default:n(()=>[o(A,{type:"primary",class:"px-4 h-10"},{default:n(()=>[V("View")]),_:1})]),_:1},8,["to"])])]),o(Y,{show:t(y),title:"Delete Space",body:"Are you sure you want to delete this space",type:"danger",positive:"Delete",onClose:i[4]||(i[4]=h=>y.value=!1),onConfirm:N},null,8,["show"]),o(E,{show:t(S),onClose:i[5]||(i[5]=h=>S.value=!1),onAdd:L},null,8,["show"])],8,Le)}}},tt=e("title",null,"My space",-1),st={class:"p-10 w-full grid lg:grid-cols-3 grid-cols-1 md:grid-cols-2 gap-4"},yt={__name:"index",setup(k){const r=z(),{spaces:x}=B(r),{errorNotification:a}=X();return Z(async()=>{try{await r.fetchAll()}catch{a("failed to fetch spaces")}}),(l,p)=>{const v=ee,C=he,g=et;return s(),m(T,null,[o(v,null,{default:n(()=>[tt]),_:1}),e("div",st,[o(C),(s(!0),m(T,null,H(t(x),y=>(s(),d(g,{space:y,key:y.id},null,8,["space"]))),128))])],64)}}};export{yt as default};
