import{B as u,o as s,f as m,i as e,p as o,m as n,y as T,u as t,P as J,c as d,j,q as $,Q,k as z,s as B,D as G,t as K,e as O,L as W,F as D,r as q,J as X,x as Z,H as ee}from"./entry.5b04ea27.js";import{_ as V}from"./Button.vue.0ee6f82c.js";import{_ as te}from"./CreateSpaceModal.b60fd4fd.js";import{_ as se}from"./TextInput.fd78d888.js";import ae from"./Icon.2016312d.js";import{_ as oe}from"./nuxt-link.4365e727.js";import{_ as ne}from"./ConfirmModal.vue.5a246b17.js";import{_ as le}from"./SearchInput.af0ff515.js";import{u as A}from"./spaces.80cc44d1.js";import{q as ce,h as I,U as ie,Y as re,S as de}from"./transition.436386a3.js";import"./config.89fb9aa0.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./combobox.ed90b5fe.js";import"./micro-task.e6132286.js";import"./use-tracked-pointer.d1411941.js";import"./use-resolve-button-type.149d9305.js";const ue={class:"card min-w-fit bg-primary text-base-100 shadow-lg"},me={class:"card-body"},_e=e("h2",{class:"card-title"},"Create Space!",-1),pe=e("p",null,"Crate a space and save the people",-1),fe={class:"card-actions justify-end"},he={__name:"CreateSpaceCard",setup(k){const r=u(!1);return(x,a)=>{const l=V,p=te;return s(),m("div",ue,[e("div",me,[_e,pe,e("div",fe,[o(l,{type:"primary-content",class:"px-4 h-10",onClick:a[0]||(a[0]=v=>r.value=!0)},{default:n(()=>[T("Create")]),_:1})])]),o(p,{show:t(r),onClose:a[1]||(a[1]=v=>r.value=!1)},null,8,["show"])])}}},ve=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ye={class:"fixed inset-0 overflow-y-auto"},xe={class:"flex min-h-full items-center justify-center p-4 text-center"},ge=e("span",null,"Add User",-1),we=["data-theme"],be={class:"card-body"},$e={class:"card-title"},ke={class:"flex gap-3 items-center"},Ce={class:"avatar"},Se={class:"w-16 rounded"},Me=["src"],Ne={class:"font-medium"},je={class:"font-medium text-xs"},Ae={class:"card-actions justify-end"},Ue=["href"],ze=["onSubmit"],Be=e("div",{class:"label-text"},"Search by name",-1),De={class:"avatar"},Te={class:"w-8 rounded"},Ve=["src","alt"],Ie={class:"w-full flex justify-end mt-4"},qe={__name:"AddSpaceUserModal",props:["show"],emits:["close","add"],setup(k,{emit:r}){const x=k;A(),u("");const a=u(!1),l=u(!1);async function p(){r("add",l.value.name),r("close")}function v(g){l.value=g}function C(){r("close")}return(g,y)=>{const S=J("CheckIcon"),_=le,c=V;return s(),d(t(de),{appear:"",show:x.show,as:"template"},{default:n(()=>[o(t(ce),{as:"div",onClose:C,class:"relative z-10"},{default:n(()=>[o(t(I),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>[ve]),_:1}),e("div",ye,[e("div",xe,[o(t(I),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[o(t(ie),{class:"w-full max-w-md h-full flex flex-col transform rounded-2xl bg-base-200 p-6 text-left align-middle shadow-xl transition-all"},{default:n(()=>[o(t(re),{as:"h3",class:"text-lg font-medium text-base-content mb-7"},{default:n(()=>[ge]),_:1}),t(l)?(s(),m("div",{key:0,class:"card shadow-md text-base-content max-w-sm lg:max-w-lg mb-4","data-theme":t(l).theme},[e("div",be,[e("div",$e,[e("div",ke,[e("div",Ce,[e("div",Se,[e("img",{src:t(l).image,alt:"Tailwind-CSS-Avatar-component"},null,8,Me)])]),e("div",null,[e("div",Ne,j(t(l).name),1),e("div",je,j(t(l).email),1)])])]),e("div",Ae,[e("a",{class:"btn btn-primary",href:"/"+t(l).name,target:"_blank"},"Profile",8,Ue)])])],8,we)):$("",!0),e("form",{onSubmit:Q(p,["prevent"])},[Be,o(_,{onSelect:v,"combobox-classes":"absolute mt-4 left-3 lg:left-0 max-h-60 max-w-md min-w-[17rem] lg:min-w-[15rem] flex flex-col overflow-auto rounded-md bg-base-200 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-50"},{default:n(({active:w,user:f,selected:M})=>[e("li",{class:z(["relative flex items-center gap-3 select-none py-2 pl-10 px-4 w-11/12 rounded-md cursor-pointer",{"bg-primary text-primary-content":w}])},[e("div",De,[e("div",Te,[e("img",{src:f.image,alt:`${f.name} profile image`},null,8,Ve)])]),e("span",{class:z(["block truncate",{"font-medium":M,"font-normal":!M}])},j(f.name),3),M?(s(),m("span",{key:0,class:z(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":w,"text-teal-600":!w}])},[o(S,{class:"h-5 w-5","aria-hidden":"true"})],2)):$("",!0)],2)]),_:1}),e("div",Ie,[o(c,{type:t(l).name?"primary":"disabled",class:"h-10 px-3",loading:t(a)},{default:n(()=>[T(" Add user ")]),_:1},8,["type","loading"])])],40,ze)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}},He=["data-theme"],Le={class:"card-body"},Re={key:1,class:"card-title"},Fe={class:"avatar-group -space-x-3"},Pe={class:"avatar"},Ye={class:"w-8"},Ee=["src"],Je={key:0,class:"avatar placeholder"},Qe={class:"w-8 bg-neutral-focus text-neutral-content test-sm"},Ge={class:"card-actions justify-between mt-3"},Ke={class:"flex gap-3"},Oe={class:"flex gap-2 items-center"},We={class:"flex gap-2 items-center"},Xe={class:"flex gap-2 items-center"},Ze={class:"flex gap-2 items-center"},et={__name:"SpaceCard",props:["space"],setup(k){const r=k,x=B(G()),{space:a}=K(r),{destroy:l,fetchAll:p,attachUser:v,update:C}=A(),{spaces:g}=B(A()),y=u(!1),S=u(!1),_=u(""),c=u(!1),w=u(!1),f=u("");async function M(){await l(a.value.id),await p()}async function H(U){await v(a.value.id,U),await p()}const L=O(()=>a.value.users.slice(0,3));async function R(){if(f.value="",!c.value){c.value=!0;return}if(_.value==""){f.value="space name cannot be empty";return}if(_.value==a.value.name){c.value=!1;return}if(g.value.find(i=>i.name==_.value)){f.value="space already existing";return}w.value=!0,await C({id:a.value.id,name:_.value}),await p(),w.value=!1,c.value=!1}return(U,i)=>{const F=se,b=ae,N=V,P=oe,Y=ne,E=qe;return s(),m("div",{class:"card min-w-fit text-base-content bg-base-200 border shadow-lg","data-theme":t(x).theme},[e("div",Le,[t(c)?(s(),d(F,{key:0,input:t(_),"onUpdate:input":i[0]||(i[0]=h=>W(_)?_.value=h:null),label:"Name",error:t(f)},null,8,["input","error"])):(s(),m("h2",Re,j(t(a).name),1)),e("div",Fe,[(s(!0),m(D,null,q(t(L),h=>(s(),m("div",Pe,[e("div",Ye,[e("img",{src:h.image},null,8,Ee)])]))),256)),t(a).users.length!=1?(s(),m("div",Je,[e("div",Qe,[e("span",null," +"+j(t(a).users.length),1)])])):$("",!0)]),e("div",Ge,[e("div",Ke,[!t(c)&&!t(a).default?(s(),d(N,{key:0,type:"danger",class:"px-2 h-10 justify-self-end",onClick:i[1]||(i[1]=h=>y.value=!0)},{default:n(()=>[e("div",Oe,[o(b,{size:"25",name:"ic:round-delete"})])]),_:1})):$("",!0),o(N,{type:t(c)?"success":"accent",class:"px-2 h-10 justify-self-end",onClick:R},{default:n(()=>[e("div",We,[t(c)?(s(),d(b,{key:0,size:"25",name:"fluent:checkmark-12-filled"})):(s(),d(b,{key:1,size:"25",name:"material-symbols:edit"}))])]),_:1},8,["type"]),t(c)?(s(),d(N,{key:1,type:"danger",class:"px-2 h-10 justify-self-end",onClick:i[2]||(i[2]=h=>c.value=!1)},{default:n(()=>[e("div",Xe,[t(c)?(s(),d(b,{key:0,size:"25",name:"ph:x-bold"})):(s(),d(b,{key:1,size:"25",name:"material-symbols:edit"}))])]),_:1})):$("",!0),t(c)?$("",!0):(s(),d(N,{key:2,type:"primary",class:"px-2 h-10 justify-self-end",onClick:i[3]||(i[3]=h=>S.value=!0)},{default:n(()=>[e("div",Ze,[o(b,{size:"25",name:"mdi:user-add"})])]),_:1}))]),o(P,{to:`/admin/space/${t(a).name}`},{default:n(()=>[o(N,{type:"primary",class:"px-4 h-10"},{default:n(()=>[T("View")]),_:1})]),_:1},8,["to"])])]),o(Y,{show:t(y),title:"Delete Space",body:"Are you sure you want to delete this space",type:"danger",positive:"Delete",onClose:i[4]||(i[4]=h=>y.value=!1),onConfirm:M},null,8,["show"]),o(E,{show:t(S),onClose:i[5]||(i[5]=h=>S.value=!1),onAdd:H},null,8,["show"])],8,He)}}},tt=e("title",null,"My space",-1),st={class:"p-10 w-full grid lg:grid-cols-3 grid-cols-1 md:grid-cols-2 gap-4"},xt={__name:"index",setup(k){const r=A(),{spaces:x}=B(r),{errorNotification:a}=X();return Z(async()=>{try{await r.fetchAll()}catch{a("failed to fetch spaces")}}),(l,p)=>{const v=ee,C=he,g=et;return s(),m(D,null,[o(v,null,{default:n(()=>[tt]),_:1}),e("div",st,[o(C),(s(!0),m(D,null,q(t(x),y=>(s(),d(g,{space:y,key:y.id},null,8,["space"]))),128))])],64)}}};export{xt as default};
