import{m as $,u as N,o as C,f as ee,K as te,a as oe,H as L,i as J,b as H,d as K,O as le,e as D}from"./micro-task.22f9df30.js";import{y as ae,c as ne,l as U,p as ue,n as ie}from"./transition.672185f0.js";import{b as re}from"./use-resolve-button-type.08964b80.js";import{af as _,l as V,e as O,a as j,al as g,q as se,m as W,w as q,E as X,F as ve,X as de,ai as F,k as pe}from"./entry.357d2ba9.js";function ce(e){throw new Error("Unexpected object: "+e)}var I=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(I||{});function be(e,a){let l=a.resolveItems();if(l.length<=0)return null;let m=a.resolveActiveIndex(),t=m??-1,o=(()=>{switch(e.focus){case 0:return l.findIndex(u=>!a.resolveDisabled(u));case 1:{let u=l.slice().reverse().findIndex((x,s,f)=>t!==-1&&f.length-s-1>=t?!1:!a.resolveDisabled(x));return u===-1?u:l.length-1-u}case 2:return l.findIndex((u,x)=>x<=t?!1:!a.resolveDisabled(u));case 3:{let u=l.slice().reverse().findIndex(x=>!a.resolveDisabled(x));return u===-1?u:l.length-1-u}case 4:return l.findIndex(u=>a.resolveId(u)===e.id);case 5:return null;default:ce(e)}})();return o===-1?m:o}function fe({container:e,accept:a,walk:l,enabled:m}){_(()=>{let t=e.value;if(!t||m!==void 0&&!m.value)return;let o=$(e);if(!o)return;let u=Object.assign(s=>a(s),{acceptNode:a}),x=o.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,u,!1);for(;x.nextNode();)l(x.currentNode)})}function Y(e={},a=null,l=[]){for(let[m,t]of Object.entries(e))Q(l,z(a,m),t);return l}function z(e,a){return e?e+"["+a+"]":a}function Q(e,a,l){if(Array.isArray(l))for(let[m,t]of l.entries())Q(e,z(a,m.toString()),t);else l instanceof Date?e.push([a,l.toISOString()]):typeof l=="boolean"?e.push([a,l?"1":"0"]):typeof l=="string"?e.push([a,l]):typeof l=="number"?e.push([a,`${l}`]):l==null?e.push([a,""]):Y(l,a,e)}function me(e,a,l){let m=V(l==null?void 0:l.value),t=O(()=>e.value!==void 0);return[O(()=>t.value?e.value:m.value),function(o){return t.value||(m.value=o),a==null?void 0:a(o)}]}function G(e){return[e.screenX,e.screenY]}function xe(){let e=V([-1,-1]);return{wasMoved(a){let l=G(a);return e.value[0]===l[0]&&e.value[1]===l[1]?!1:(e.value=l,!0)},update(a){e.value=G(a)}}}function ge(e,a){return e===a}var Oe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Oe||{}),ye=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(ye||{}),Se=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Se||{});let Z=Symbol("ComboboxContext");function M(e){let a=pe(Z,null);if(a===null){let l=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,M),l}return a}let Pe=j({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ge},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:a,attrs:l,emit:m}){let t=V(1),o=V(null),u=V(null),x=V(null),s=V(null),f=V({static:!1,hold:!1}),y=V([]),h=V(null),T=V(1),w=V(!1);function k(i=c=>c){let c=h.value!==null?y.value[h.value]:null,b=le(i(y.value.slice()),S=>C(S.dataRef.domRef)),v=c?b.indexOf(c):null;return v===-1&&(v=null),{options:b,activeOptionIndex:v}}let n=O(()=>e.multiple?1:0),r=O(()=>e.nullable),[p,P]=me(O(()=>e.modelValue===void 0?N(n.value,{[1]:[],[0]:void 0}):e.modelValue),i=>m("update:modelValue",i),O(()=>e.defaultValue)),d={comboboxState:t,value:p,mode:n,compare(i,c){if(typeof e.by=="string"){let b=e.by;return(i==null?void 0:i[b])===(c==null?void 0:c[b])}return e.by(i,c)},defaultValue:O(()=>e.defaultValue),nullable:r,inputRef:u,labelRef:o,buttonRef:x,optionsRef:s,disabled:O(()=>e.disabled),options:y,change(i){P(i)},activeOptionIndex:O(()=>{if(w.value&&h.value===null&&y.value.length>0){let i=y.value.findIndex(c=>!c.dataRef.disabled);if(i!==-1)return i}return h.value}),activationTrigger:T,optionsPropsRef:f,closeCombobox(){w.value=!1,!e.disabled&&t.value!==1&&(t.value=1,h.value=null)},openCombobox(){if(w.value=!0,e.disabled||t.value===0)return;let i=y.value.findIndex(c=>{let b=g(c.dataRef.value);return N(n.value,{[0]:()=>d.compare(g(d.value.value),g(b)),[1]:()=>g(d.value.value).some(v=>d.compare(g(v),g(b)))})});i!==-1&&(h.value=i),t.value=0},goToOption(i,c,b){if(w.value=!1,e.disabled||s.value&&!f.value.static&&t.value===1)return;let v=k();if(v.activeOptionIndex===null){let R=v.options.findIndex(B=>!B.dataRef.disabled);R!==-1&&(v.activeOptionIndex=R)}let S=be(i===I.Specific?{focus:I.Specific,id:c}:{focus:i},{resolveItems:()=>v.options,resolveActiveIndex:()=>v.activeOptionIndex,resolveId:R=>R.id,resolveDisabled:R=>R.dataRef.disabled});h.value=S,T.value=b??1,y.value=v.options},selectOption(i){let c=y.value.find(v=>v.id===i);if(!c)return;let{dataRef:b}=c;P(N(n.value,{[0]:()=>b.value,[1]:()=>{let v=g(d.value.value).slice(),S=g(b.value),R=v.findIndex(B=>d.compare(S,g(B)));return R===-1?v.push(S):v.splice(R,1),v}}))},selectActiveOption(){if(d.activeOptionIndex.value===null)return;let{dataRef:i,id:c}=y.value[d.activeOptionIndex.value];P(N(n.value,{[0]:()=>i.value,[1]:()=>{let b=g(d.value.value).slice(),v=g(i.value),S=b.findIndex(R=>d.compare(v,g(R)));return S===-1?b.push(v):b.splice(S,1),b}})),d.goToOption(I.Specific,c)},registerOption(i,c){let b={id:i,dataRef:c},v=k(S=>[...S,b]);if(h.value===null){let S=c.value.value;N(n.value,{[0]:()=>d.compare(g(d.value.value),g(S)),[1]:()=>g(d.value.value).some(R=>d.compare(g(R),g(S)))})&&(v.activeOptionIndex=v.options.indexOf(b))}y.value=v.options,h.value=v.activeOptionIndex,T.value=1},unregisterOption(i){var c;d.activeOptionIndex.value!==null&&((c=d.options.value[d.activeOptionIndex.value])==null?void 0:c.id)===i&&(w.value=!0);let b=k(v=>{let S=v.findIndex(R=>R.id===i);return S!==-1&&v.splice(S,1),v});y.value=b.options,h.value=b.activeOptionIndex,T.value=1}};ae([u,x,s],()=>d.closeCombobox(),O(()=>t.value===0)),se(Z,d),ne(O(()=>N(t.value,{[0]:U.Open,[1]:U.Closed})));let A=O(()=>d.activeOptionIndex.value===null?null:y.value[d.activeOptionIndex.value].dataRef.value),E=O(()=>{var i;return(i=C(u))==null?void 0:i.closest("form")});return W(()=>{q([E],()=>{if(!E.value||e.defaultValue===void 0)return;function i(){d.change(e.defaultValue)}return E.value.addEventListener("reset",i),()=>{var c;(c=E.value)==null||c.removeEventListener("reset",i)}},{immediate:!0})}),()=>{let{name:i,disabled:c,form:b,...v}=e,S={open:t.value===0,disabled:c,activeIndex:d.activeOptionIndex.value,activeOption:A.value,value:p.value};return X(ve,[...i!=null&&p.value!=null?Y({[i]:p.value}).map(([R,B])=>X(ee,te({features:oe.Hidden,key:R,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:b,name:R,value:B}))):[],L({theirProps:{...l,...J(v,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:S,slots:a,attrs:l,name:"Combobox"})])}}}),Te=j({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${H()}`}},setup(e,{attrs:a,slots:l,expose:m}){let t=M("ComboboxButton");m({el:t.buttonRef,$el:t.buttonRef});function o(s){t.disabled.value||(t.comboboxState.value===0?t.closeCombobox():(s.preventDefault(),t.openCombobox()),F(()=>{var f;return(f=C(t.inputRef))==null?void 0:f.focus({preventScroll:!0})}))}function u(s){switch(s.key){case D.ArrowDown:s.preventDefault(),s.stopPropagation(),t.comboboxState.value===1&&t.openCombobox(),F(()=>{var f;return(f=t.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case D.ArrowUp:s.preventDefault(),s.stopPropagation(),t.comboboxState.value===1&&(t.openCombobox(),F(()=>{t.value.value||t.goToOption(I.Last)})),F(()=>{var f;return(f=t.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case D.Escape:if(t.comboboxState.value!==0)return;s.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&s.stopPropagation(),t.closeCombobox(),F(()=>{var f;return(f=t.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return}}let x=re(O(()=>({as:e.as,type:a.type})),t.buttonRef);return()=>{var s,f;let y={open:t.comboboxState.value===0,disabled:t.disabled.value,value:t.value.value},{id:h,...T}=e,w={ref:t.buttonRef,id:h,type:x.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(s=C(t.optionsRef))==null?void 0:s.id,"aria-expanded":t.disabled.value?void 0:t.comboboxState.value===0,"aria-labelledby":t.labelRef.value?[(f=C(t.labelRef))==null?void 0:f.id,h].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:u,onClick:o};return L({ourProps:w,theirProps:T,slot:y,attrs:a,slots:l,name:"ComboboxButton"})}}}),we=j({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${H()}`}},emits:{change:e=>!0},setup(e,{emit:a,attrs:l,slots:m,expose:t}){let o=M("ComboboxInput"),u={value:!1};t({el:o.inputRef,$el:o.inputRef});let x=O(()=>{var n;let r=o.value.value;return C(o.inputRef)?typeof e.displayValue<"u"&&r!==void 0?(n=e.displayValue(r))!=null?n:"":typeof r=="string"?r:"":""});W(()=>{q([x,o.comboboxState],([n,r],[p,P])=>{if(u.value)return;let d=C(o.inputRef);d&&(P===0&&r===1||n!==p)&&(d.value=n)},{immediate:!0}),q([o.comboboxState],([n],[r])=>{if(n===0&&r===1){let p=C(o.inputRef);if(!p)return;let P=p.value,{selectionStart:d,selectionEnd:A,selectionDirection:E}=p;p.value="",p.value=P,E!==null?p.setSelectionRange(d,A,E):p.setSelectionRange(d,A)}})});let s=V(!1);function f(){s.value=!0}function y(){setTimeout(()=>{s.value=!1})}function h(n){switch(u.value=!0,n.key){case D.Backspace:case D.Delete:if(o.mode.value!==0||!o.nullable.value)return;let r=n.currentTarget;requestAnimationFrame(()=>{if(r.value===""){o.change(null);let p=C(o.optionsRef);p&&(p.scrollTop=0),o.goToOption(I.Nothing)}});break;case D.Enter:if(u.value=!1,o.comboboxState.value!==0||s.value)return;if(n.preventDefault(),n.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case D.ArrowDown:return u.value=!1,n.preventDefault(),n.stopPropagation(),N(o.comboboxState.value,{[0]:()=>o.goToOption(I.Next),[1]:()=>o.openCombobox()});case D.ArrowUp:return u.value=!1,n.preventDefault(),n.stopPropagation(),N(o.comboboxState.value,{[0]:()=>o.goToOption(I.Previous),[1]:()=>{o.openCombobox(),F(()=>{o.value.value||o.goToOption(I.Last)})}});case D.Home:if(n.shiftKey)break;return u.value=!1,n.preventDefault(),n.stopPropagation(),o.goToOption(I.First);case D.PageUp:return u.value=!1,n.preventDefault(),n.stopPropagation(),o.goToOption(I.First);case D.End:if(n.shiftKey)break;return u.value=!1,n.preventDefault(),n.stopPropagation(),o.goToOption(I.Last);case D.PageDown:return u.value=!1,n.preventDefault(),n.stopPropagation(),o.goToOption(I.Last);case D.Escape:if(u.value=!1,o.comboboxState.value!==0)return;n.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&n.stopPropagation(),o.closeCombobox();break;case D.Tab:if(u.value=!1,o.comboboxState.value!==0)return;o.mode.value===0&&o.selectActiveOption(),o.closeCombobox();break}}function T(n){o.openCombobox(),a("change",n)}function w(){u.value=!1}let k=O(()=>{var n,r,p,P;return(P=(p=(r=e.defaultValue)!=null?r:o.defaultValue.value!==void 0?(n=e.displayValue)==null?void 0:n.call(e,o.defaultValue.value):null)!=null?p:o.defaultValue.value)!=null?P:""});return()=>{var n,r,p,P,d,A;let E={open:o.comboboxState.value===0},{id:i,displayValue:c,onChange:b,...v}=e,S={"aria-controls":(n=o.optionsRef.value)==null?void 0:n.id,"aria-expanded":o.disabled.value?void 0:o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null||(r=o.options.value[o.activeOptionIndex.value])==null?void 0:r.id,"aria-labelledby":(d=(p=C(o.labelRef))==null?void 0:p.id)!=null?d:(P=C(o.buttonRef))==null?void 0:P.id,"aria-autocomplete":"list",id:i,onCompositionstart:f,onCompositionend:y,onKeydown:h,onInput:T,onBlur:w,role:"combobox",type:(A=l.type)!=null?A:"text",tabIndex:0,ref:o.inputRef,defaultValue:k.value,disabled:o.disabled.value===!0?!0:void 0};return L({ourProps:S,theirProps:v,slot:E,attrs:l,slots:m,features:K.RenderStrategy|K.Static,name:"ComboboxInput"})}}}),De=j({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:a,slots:l,expose:m}){let t=M("ComboboxOptions"),o=`headlessui-combobox-options-${H()}`;m({el:t.optionsRef,$el:t.optionsRef}),_(()=>{t.optionsPropsRef.value.static=e.static}),_(()=>{t.optionsPropsRef.value.hold=e.hold});let u=ue(),x=O(()=>u!==null?(u.value&U.Open)===U.Open:t.comboboxState.value===0);return fe({container:O(()=>C(t.optionsRef)),enabled:O(()=>t.comboboxState.value===0),accept(s){return s.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}}),()=>{var s,f,y;let h={open:t.comboboxState.value===0},T={"aria-labelledby":(y=(s=C(t.labelRef))==null?void 0:s.id)!=null?y:(f=C(t.buttonRef))==null?void 0:f.id,id:o,ref:t.optionsRef,role:"listbox","aria-multiselectable":t.mode.value===1?!0:void 0},w=J(e,["hold"]);return L({ourProps:T,theirProps:w,slot:h,attrs:a,slots:l,features:K.RenderStrategy|K.Static,visible:x.value,name:"ComboboxOptions"})}}}),Ve=j({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:a,attrs:l,expose:m}){let t=M("ComboboxOption"),o=`headlessui-combobox-option-${H()}`,u=V(null);m({el:u,$el:u});let x=O(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===o:!1),s=O(()=>N(t.mode.value,{[0]:()=>t.compare(g(t.value.value),g(e.value)),[1]:()=>g(t.value.value).some(r=>t.compare(g(r),g(e.value)))})),f=O(()=>({disabled:e.disabled,value:e.value,domRef:u}));W(()=>t.registerOption(o,f)),de(()=>t.unregisterOption(o)),_(()=>{t.comboboxState.value===0&&x.value&&t.activationTrigger.value!==0&&F(()=>{var r,p;return(p=(r=C(u))==null?void 0:r.scrollIntoView)==null?void 0:p.call(r,{block:"nearest"})})});function y(r){if(e.disabled)return r.preventDefault();t.selectOption(o),t.mode.value===0&&t.closeCombobox(),ie()||requestAnimationFrame(()=>{var p;return(p=C(t.inputRef))==null?void 0:p.focus()})}function h(){if(e.disabled)return t.goToOption(I.Nothing);t.goToOption(I.Specific,o)}let T=xe();function w(r){T.update(r)}function k(r){T.wasMoved(r)&&(e.disabled||x.value||t.goToOption(I.Specific,o,0))}function n(r){T.wasMoved(r)&&(e.disabled||x.value&&(t.optionsPropsRef.value.hold||t.goToOption(I.Nothing)))}return()=>{let{disabled:r}=e,p={active:x.value,selected:s.value,disabled:r},P={id:o,ref:u,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":s.value,disabled:void 0,onClick:y,onFocus:h,onPointerenter:w,onMouseenter:w,onPointermove:k,onMousemove:k,onPointerleave:n,onMouseleave:n};return L({ourProps:P,theirProps:e,slot:p,attrs:l,slots:a,name:"ComboboxOption"})}}});export{we as $,Te as K,Pe as N,De as U,Ve as _,I as a,fe as p,xe as u,be as x};
