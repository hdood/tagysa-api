import C from"./Icon.82aece9d.js";import{_ as $}from"./nuxt-link.78c96cdd.js";import{_ as A}from"./Button.vue.6778f305.js";import{x as B,l as N,m as S,o,f as s,i as t,z as l,t as a,u as r,F as f,B as D,A as c,C as _,D as p}from"./entry.458b6613.js";import{u as O}from"./orders.0dbd88ea.js";import"./config.2982fd22.js";import"./_plugin-vue_export-helper.c27b6911.js";const R={class:"p-4"},V={class:"bg-base-100 p-4 rounded-lg w-11/12 mx-auto overflow-x-scroll lg:overflow-x-hidden"},M={key:0},Y={key:1,class:"table"},j=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Status"),t("th",null,"Date"),t("th",null,"Address"),t("th",null,"Card type"),t("th")])],-1),z={class:""},F={key:0},L={key:1},T=["id"],E={method:"dialog",class:"modal-box"},I=t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"}," ✕ ",-1),q=t("h3",{class:"font-bold text-lg"},"Cancel Order",-1),G=t("p",{class:"py-4"},"Are you sure you want to cancel this order?",-1),H={class:"w-full flex justify-end"},J=["id"],K={method:"dialog",class:"modal-box"},P=t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"}," ✕ ",-1),Q=t("h3",{class:"font-bold text-lg"},"Order Received",-1),U=t("p",{class:"py-4"},"Confirm receiving the order please",-1),W={class:"w-full flex justify-end"},X=t("tfoot",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Status"),t("th",null,"Date"),t("th",null,"Address"),t("th",null,"Card type"),t("th")])],-1),it={__name:"orders",setup(Z){const h=O(),{orders:m}=B(h),{fetchAll:u,cancel:g,confirmReceiving:y}=h,n=N(!1);async function b(i){n.value=!0,await g(i),await u(),n.value=!1}async function v(i){n.value=!0,await y(i),await u(),n.value=!1}return S(async()=>{await u()}),(i,tt)=>{const k=C,x=$,d=A;return o(),s(f,null,[t("div",R,[l(x,{to:"/admin/nfc"},{default:a(()=>[l(k,{name:"ic:round-arrow-back",size:"45",class:"p-1 cursor-pointer hover:bg-base-300 rounded-md"})]),_:1})]),t("div",V,[r(m).length==0?(o(),s("div",M,"You didn't order yet")):(o(),s("table",Y,[j,t("tbody",null,[(o(!0),s(f,null,D(r(m),e=>(o(),s("tr",{key:e.id,class:"hover:bg-base-200 cursor-pointer"},[t("th",null,c(e.id),1),t("td",null,c(e.status),1),t("td",null,c(e.created_at),1),t("td",z,[t("address",null,c(e.address),1)]),t("td",null,c(e.card.type),1),e.status=="paid"?(o(),s("td",F,[l(d,{type:"danger",loading:r(n),onclick:`cancel_modal_${e.id}.showModal()`},{default:a(()=>[_(" Cancel")]),_:2},1032,["loading","onclick"])])):p("",!0),e.status=="delivering"?(o(),s("td",L,[l(d,{type:"primary",loading:r(n),onclick:`confirm_receiving_modal_${e.id}.showModal()`},{default:a(()=>[_(" Confirm receiving")]),_:2},1032,["loading","onclick"])])):p("",!0),t("dialog",{id:`cancel_modal_${e.id}`,class:"modal"},[t("form",E,[I,q,G,t("div",H,[l(d,{type:"danger",onClick:w=>b(e.id)},{default:a(()=>[_("Yes cancel my order")]),_:2},1032,["onClick"])])])],8,T),t("dialog",{id:`confirm_receiving_modal_${e.id}`,class:"modal"},[t("form",K,[P,Q,U,t("div",W,[l(d,{type:"primary",onClick:w=>v(e.id)},{default:a(()=>[_("Yes I received my order")]),_:2},1032,["onClick"])])])],8,J)]))),128))]),X]))])],64)}}};export{it as default};
