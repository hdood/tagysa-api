import{G as $,x as z,J as B,l as u,m as N,o as f,f as m,z as a,t as p,i as e,A as o,u as r,D as V,F as C,B as D,H as L,L as M,T as S,C as T}from"./entry.0dead6c9.js";import H from"./Icon.d83697d0.js";import{_ as A}from"./nuxt-link.d6cb1b72.js";import{_ as F}from"./LinkCardModal.3235b1b1.js";import{C as R}from"./auto.1f697c56.js";import E from"./AdminLayout.4a60e57e.js";import"./config.5b6e1a52.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./TextInput.cd397967.js";import"./links.0fabadd6.js";import"./transition.d70661fa.js";import"./micro-task.ba52584a.js";import"./Logo.6c89892f.js";import"./BottomNavigation.d02c4ef3.js";import"./ShareModal.aab4bf03.js";import"./Button.vue.d5db2e11.js";import"./ConfirmModal.vue.87d15158.js";import"./auth.cd32a7b2.js";const G=e("title",null,"Dashboard",-1),I={class:"max-w-7xl mt-10 mx-auto flex justify-between"},J={class:"flex items-center w-full flex-wrap gap-5 justify-center lg:justify-start"},O={class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},P={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},U={class:"flex flex-col justify-center text-center"},q={class:"text-3xl font-semibold leadi"},K={class:"capitalize"},Q={class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},W={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},X={class:"flex flex-col justify-center text-center"},Y={class:"text-3xl font-semibold leadi"},Z={class:"capitalize"},ee={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},te={class:"flex flex-col justify-center align-middle"},se={class:"text-3xl font-semibold leadi"},oe={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},le={class:"flex flex-col justify-center align-middle"},ae={class:"text-3xl font-semibold leadi"},ie={class:"max-w-7xl mx-auto my-5 flex gap-4 flex-wrap lg:flex-nowrap"},ne={class:"flex flex-col gap-5 p-5 rounded-lg bg-base-200 lg:w-[60rem] w-full items-center"},re={class:"flex justify-between w-full"},de={class:"text-2xl font-medium"},ce={class:"w-full max-h-96 overflow-auto"},fe={key:0,class:"flex flex-col gap-3"},me=["onClick"],ue={class:"flex items-center gap-2"},pe={key:1},_e={class:"flex text-center flex-col items-center gap-3"},ge={class:"text-xl font-medium"},xe={class:"w-full overflow-hidden rounded-lg flex flex-col items-start gap-8"},ve={class:"lg:w-[40rem] text-3xl font-medium text-base-content"},be={class:"lg:w-[40rem]",id:"chart-wrapper"},Re={__name:"dashboard",setup(we){const k=$().provide.axios,{user:d}=z(B()),_=u(!1),g=u({});u([]);const x=u(!1),b=u(null);let w=!0;async function h(){var v,n;const t=(await k("/api/analytics/"+((n=(v=g.value)==null?void 0:v.profile)==null?void 0:n.id))).data.visits;x.value=new R(b.value,{type:"bar",data:{labels:t.map(l=>l.period),datasets:[{label:"Views",data:t.map(l=>l.count)}]},options:{plugins:{customCanvasBackgroundColor:{color:localStorage.getItem("tagysa-theme")=="winter"?"white":"black"}}},plugins:[{id:"customCanvasBackgroundColor",beforeDraw:(l,y,i)=>{const{ctx:c}=l;c.save(),c.globalCompositeOperation="destination-over",c.fillStyle=i.color||"#99ffff",c.fillRect(0,0,l.width,l.height),c.restore()}}]})}N(async()=>{var s,t;g.value=(t=(s=d.value)==null?void 0:s.cards)==null?void 0:t[0],h()});async function j(s){if(w&&(w=!1,!!x.value&&b.value)){g.value=s;try{x.value.stop(),x.value.destroy(),h()}catch(t){alert(t)}setTimeout(()=>w=!0,1e3)}}return(s,t)=>{const v=L,n=H,l=A,y=F;return f(),m(C,null,[a(v,null,{default:p(()=>[G]),_:1}),a(E,null,{default:p(()=>[e("div",I,[e("div",J,[e("div",O,[e("div",P,[a(n,{name:"solar:card-bold",size:"35"})]),e("div",U,[e("p",q,o(r(d).cards.length),1),e("p",K,o(s.$t("cards")),1)])]),e("div",Q,[e("div",W,[a(n,{name:"mingcute:finger-tap-fill",size:"35"})]),e("div",X,[e("p",Y,o(r(d).views),1),e("p",Z,o(s.$t("taps")),1)])]),a(l,{to:"/products",class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},{default:p(()=>[e("div",ee,[a(n,{name:"mdi:cart",size:"35"})]),e("div",te,[e("p",se,o(s.$t("products")),1)])]),_:1}),a(l,{to:"/account",class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},{default:p(()=>[e("div",oe,[a(n,{name:"material-symbols:settings",size:"35"})]),e("div",le,[e("p",ae,o(s.$t("settings")),1)])]),_:1})])]),e("div",ie,[e("div",ne,[a(y,{show:r(_),onClose:t[0]||(t[0]=i=>_.value=!1)},null,8,["show"]),e("div",re,[e("h1",de,o(s.$t("cards")),1),r(d).cards.length!=0?(f(),m("button",{key:0,onClick:t[1]||(t[1]=i=>_.value=!0),class:"btn btn-sm btn-info"}," + ")):V("",!0)]),e("div",ce,[r(d).cards.length!=0?(f(),m("div",fe,[(f(!0),m(C,null,D(r(d).cards,i=>(f(),m("div",{onClick:c=>j(i)},[e("div",{class:M(["bg-primary p-4 rounded text-primary-content flex items-center justify-between gap-2 cursor-pointer",[i.id==r(g).id&&"border-2 border-base"]])},[e("div",ue,[a(n,{name:"solar:card-bold",size:"30"}),e("div",null,o(i.name),1)]),e("div",{onClick:t[2]||(t[2]=S(()=>{},["stop"]))},[a(l,{to:"/profile/"+i.id,class:"btn btn-base"},{default:p(()=>[T(o(s.$t("editProfile")),1)]),_:2},1032,["to"])])],2)],8,me))),256))])):(f(),m("div",pe,[e("div",_e,[e("span",ge,o(s.$t("noCards")),1),e("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=i=>_.value=!0)},o(s.$t("linkCard")),1)])]))])]),e("div",xe,[e("div",ve,o(s.$t("views")),1),e("div",be,[e("canvas",{class:"lg:w-[40rem]",ref_key:"canvas",ref:b,id:"visitors"},null,512)])])])]),_:1})],64)}}};export{Re as default};
