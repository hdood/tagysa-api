import{D as N,B as l,E as m,x as U,e as V,P as j,o as C,f as D,p as o,m as c,i as e,Q as H,u as s,L as b,w as $,M as A,j as O,y as _,F as G,H as I}from"./entry.7d81f6f8.js";import{_ as Q}from"./Logo.09782031.js";import{_ as Y}from"./TextInput.54931805.js";import{_ as q}from"./nuxt-link.89210bb3.js";import{_ as z}from"./Button.vue.b73a2d1a.js";import{i as J}from"./googleProvider.da8280de.js";import{u as K}from"./social.65d4ef04.js";import{u as W}from"./auth.3404e64c.js";import{u as X}from"./links.b1ba9627.js";import"./Icon.6db7af4e.js";import"./config.b55a6f2a.js";import"./_plugin-vue_export-helper.c27b6911.js";const Z=e("title",null,"Login",-1),ee={class:"flex flex-col items-center justify-center gap-4 min-h-screen p-3 bg-base-200"},te={class:"bg-base-100 flex rounded-xl shadow-md overflow-hidden"},oe={class:"flex flex-col items-center justify-center w-full gap-6 py-3 px-7 lg:min-w-fit lg:w-[30rem]"},se=e("div",{class:"space-y-3"},[e("div",{class:"text-2xl font-medium text-center text-primary"},"Login")],-1),ae=e("div",{class:"w-full text-center"},"Or",-1),ne=["onSubmit"],re={class:""},le={class:"form-control w-full max-w-xs"},ie=e("label",{class:"label"},[e("span",{class:"label-text"},"Password")],-1),ue={class:"label"},ce={class:"text-error"},de={class:"label-text-alt link-hover"},pe={class:"text-sm"},Be={__name:"login",setup(me){const y=N(),f=K(),S=W(),L=X(),g=l(null),k=m(),a=l(""),n=l(""),i=l({email:"",password:""}),r=l(!1);U(async()=>{(await J()).useRenderButton({useOneTap:!0,element:g.value,onError:()=>console.error("Failed to render button"),onSuccess:async d=>(r.value=!0,await f.googleLogin(d)?await m().push("/admin"):(f.error="You're not signed up",await m().push("/register")),r.value=!0,!0)})()});const B=V(()=>a.value!=""&&n.value!=""),E=async()=>{var u;r.value=!0,i.value={email:"",password:""};try{await S.login(a.value,n.value),await y.getUser(),await L.getAllLinks(),await k.push("/dashboard")}catch(t){i.value=(u=t==null?void 0:t.response)==null?void 0:u.data}r.value=!1};return(u,t)=>{var v,w,x,h;const d=I,P=Q,R=Y,T=q,F=z,M=j("RouterLink");return C(),D(G,null,[o(d,null,{default:c(()=>[Z]),_:1}),e("div",ee,[e("div",null,[o(P,{class:"w-20 h-20"})]),e("div",te,[e("div",oe,[se,e("div",{id:"buttonEL",ref_key:"buttonEl",ref:g},null,512),ae,e("form",{onSubmit:H(E,["prevent"])},[e("div",re,[o(R,{label:"Email",input:s(a),"onUpdate:input":t[0]||(t[0]=p=>b(a)?a.value=p:null),placeholder:"Email eg: test@test.com",error:(w=(v=s(i))==null?void 0:v.email)==null?void 0:w[0]},null,8,["input","error"]),e("div",le,[ie,$(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=p=>b(n)?n.value=p:null),placeholder:"Password",inputType:"email",class:"input input-bordered input-primary w-full max-w-xs"},null,512),[[A,s(n)]]),e("label",ue,[e("span",ce,O((h=(x=s(i))==null?void 0:x.password)==null?void 0:h[0]),1),e("span",de,[o(T,{to:"/forgot-password"},{default:c(()=>[_("Forgot password?")]),_:1})])])])]),o(F,{type:s(B)?"primary":"disabled",loading:s(r),class:"mt-3 w-full"},{default:c(()=>[_("Log in")]),_:1},8,["type","loading"])],40,ne),e("div",pe,[o(M,{to:"/register",class:"underline text-indigo-600"},{default:c(()=>[_("Create account")]),_:1})])])])])],64)}}};export{Be as default};
