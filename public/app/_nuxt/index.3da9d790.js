import{_ as U}from"./TextInput.0da3728b.js";import{_ as A}from"./Button.vue.3e562564.js";import{B as n,o as C,f as L,i as r,Q as h,p as a,u as e,L as c,m as x,y,F as V,G as k}from"./entry.e6451b68.js";import{u as D}from"./auth.207ea71f.js";import"./Icon.2db9e4df.js";import"./config.107b8240.js";import"./_plugin-vue_export-helper.c27b6911.js";const F=r("h2",{class:"text-2xl font-medium text-base-content"},"Change password",-1),R=["onSubmit"],$={class:"mt-4"},E=r("h2",{class:"text-2xl font-medium text-base-content"},"Delete account",-1),G=["onSubmit"],K={__name:"index",setup(I){const{changePassword:P,deleteAccount:T}=D(),l=n(""),o=n(""),u=n(""),i=n(""),m=n(!1),w=n(!1),p=n({});async function B(){if(o.value.length<8){p.value={newPassword:["password length must be longer than 8 characters"]};return}if(o.value!=u.value){p.value={cPassword:["password confirmation is not the same as the new password"]};return}m.value=!0,await P(l.value,o.value,u.value),m.value=!1}async function N(){w.value=!0,await T(i.value)&&k().push("/"),w.value=!1}return(S,t)=>{var _,v,g,b;const d=U,f=A;return C(),L(V,null,[r("div",null,[F,r("form",{onSubmit:h(B,["prevent"])},[a(d,{input:e(l),"onUpdate:input":t[0]||(t[0]=s=>c(l)?l.value=s:null),label:"Current password",inputType:"password"},null,8,["input"]),a(d,{input:e(o),"onUpdate:input":t[1]||(t[1]=s=>c(o)?o.value=s:null),label:"New password",inputType:"password",error:(v=(_=e(p))==null?void 0:_.newPassword)==null?void 0:v[0]},null,8,["input","error"]),a(d,{input:e(u),"onUpdate:input":t[2]||(t[2]=s=>c(u)?u.value=s:null),label:"New password confirmation",error:(b=(g=e(p))==null?void 0:g.cPassword)==null?void 0:b[0],inputType:"password"},null,8,["input","error"]),a(f,{type:"primary",class:"mt-3",loading:e(m)},{default:x(()=>[y("Update password")]),_:1},8,["loading"])],40,R)]),r("div",$,[E,r("form",{onSubmit:h(N,["prevent"])},[a(d,{input:e(i),"onUpdate:input":t[3]||(t[3]=s=>c(i)?i.value=s:null),inputType:"password",label:"Password"},null,8,["input"]),a(f,{type:"danger",class:"mt-2",loading:e(w)},{default:x(()=>[y("Delete Account")]),_:1},8,["loading"])],40,G)])],64)}}};export{K as default};
