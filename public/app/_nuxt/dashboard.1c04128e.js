import{G as L,x as N,J as V,l as c,m as D,o as f,f as u,z as l,t as m,i as e,A as a,u as r,D as S,F as j,B as T,H as U,L as Z,T as H,C as F}from"./entry.357d2ba9.js";import I from"./Icon.89e3ed5b.js";import{_ as R}from"./nuxt-link.f58e1882.js";import{_ as E}from"./LinkCardModal.e5936e98.js";import{_ as G}from"./ConfirmModal.vue.f755853a.js";import{C as J}from"./auto.1f697c56.js";import O from"./AdminLayout.2a444c87.js";import"./config.5fdcdd03.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./TextInput.c776514d.js";import"./transition.672185f0.js";import"./micro-task.22f9df30.js";import"./Button.vue.b7b738c2.js";import"./Logo.6145a656.js";import"./BottomNavigation.5d747fad.js";import"./ShareModal.9f7e3f81.js";import"./auth.96ebe22d.js";const P=e("title",null,"Dashboard",-1),Y={class:"max-w-7xl mt-10 mx-auto flex justify-between"},q={class:"flex items-center w-full flex-wrap gap-5 justify-center lg:justify-start"},K={class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},Q={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},W={class:"flex flex-col justify-center text-center"},X={class:"text-3xl font-semibold leadi"},ee={class:"capitalize"},te={class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},se={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},oe={class:"flex flex-col justify-center text-center"},le={class:"text-3xl font-semibold leadi"},ae={class:"capitalize"},ne={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},ie={class:"flex flex-col justify-center align-middle"},re={class:"text-3xl font-semibold leadi"},de={class:"flex justify-center p-2 align-middle rounded-lg sm:p-4 dark:bg-violet-400"},ce={class:"flex flex-col justify-center align-middle"},fe={class:"text-3xl font-semibold leadi"},ue={class:"max-w-7xl mx-auto my-5 flex gap-4 flex-wrap lg:flex-nowrap"},me={class:"flex flex-col gap-5 p-5 rounded-lg bg-base-200 lg:w-[60rem] w-full items-center"},pe={class:"flex justify-between w-full"},_e={class:"text-2xl font-medium"},ge={class:"w-full max-h-96 overflow-auto"},ve={key:0,class:"flex flex-col gap-3"},xe=["onClick"],we={class:"flex items-center gap-2"},be=["onClick"],he=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},[e("path",{fill:"currentColor",d:"M6.456 10.218a1.934 1.934 0 0 0-1.902.492L2.5 12.762A1.935 1.935 0 0 0 5.238 15.5l2.052-2.053a1.934 1.934 0 0 0 .492-1.902a.968.968 0 0 1-1.326-1.326Zm4.446-4.446a.968.968 0 0 1 1.326 1.326a1.934 1.934 0 0 0 1.902-.492l1.37-1.368A1.935 1.935 0 1 0 12.762 2.5l-1.368 1.37a1.934 1.934 0 0 0-.492 1.902Zm5.965-4.639a3.87 3.87 0 0 1 0 5.473l-1.368 1.368A3.87 3.87 0 0 1 10.026 2.5l1.368-1.368a3.87 3.87 0 0 1 5.473 0ZM8.658 9.342a3.87 3.87 0 0 1 0 5.472l-2.052 2.053a3.87 3.87 0 0 1-5.473-5.473l2.053-2.052a3.87 3.87 0 0 1 5.472 0Z"})],-1),ye=[he],Ce={key:1},ke={class:"flex text-center flex-col items-center gap-3"},$e={class:"text-xl font-medium"},je={class:"w-full overflow-hidden rounded-lg flex flex-col items-start gap-8"},ze={class:"lg:w-[40rem] text-3xl font-medium text-base-content"},Me={class:"lg:w-[40rem]",id:"chart-wrapper"},Pe={__name:"dashboard",setup(Be){const y=L().provide.axios,{user:d}=N(V()),p=c(!1),_=c(!1),C=c("");function z(t){C.value=t,_.value=!0}const g=c({});c([]);const v=c(!1),w=c(null);let b=!0;async function M(){try{const t=await y.post("/api/cards/unlink",{id:C.value});d.value=t.data.data,_.value=!1}catch(t){alert(t)}}async function k(){var x,i;const s=(await y("/api/analytics/"+((i=(x=g.value)==null?void 0:x.profile)==null?void 0:i.id))).data.visits;v.value=new J(w.value,{type:"bar",data:{labels:s.map(n=>n.period),datasets:[{label:"Views",data:s.map(n=>n.count)}]},options:{plugins:{customCanvasBackgroundColor:{color:localStorage.getItem("tagysa-theme")=="winter"?"white":"black"}}},plugins:[{id:"customCanvasBackgroundColor",beforeDraw:(n,$,h)=>{const{ctx:o}=n;o.save(),o.globalCompositeOperation="destination-over",o.fillStyle=h.color||"#99ffff",o.fillRect(0,0,n.width,n.height),o.restore()}}]})}D(async()=>{var t,s;g.value=(s=(t=d.value)==null?void 0:t.cards)==null?void 0:s[0],k()});async function B(t){if(b&&(b=!1,!!v.value&&w.value)){g.value=t;try{v.value.stop(),v.value.destroy(),k()}catch(s){alert(s)}setTimeout(()=>b=!0,1e3)}}return(t,s)=>{const x=U,i=I,n=R,$=E,h=G;return f(),u(j,null,[l(x,null,{default:m(()=>[P]),_:1}),l(O,null,{default:m(()=>[e("div",Y,[e("div",q,[e("div",K,[e("div",Q,[l(i,{name:"solar:card-bold",size:"35"})]),e("div",W,[e("p",X,a(r(d).cards.length),1),e("p",ee,a(t.$t("cards")),1)])]),e("div",te,[e("div",se,[l(i,{name:"mingcute:finger-tap-fill",size:"35"})]),e("div",oe,[e("p",le,a(r(d).views),1),e("p",ae,a(t.$t("taps")),1)])]),l(n,{to:"/products",class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},{default:m(()=>[e("div",ne,[l(i,{name:"mdi:cart",size:"35"})]),e("div",ie,[e("p",re,a(t.$t("products")),1)])]),_:1}),l(n,{to:"/account",class:"flex p-4 gap-4 justify-between px-5 rounded-lg md:gap-6 bg-base-200 text-base-content min-w-[18rem] w-full lg:w-fit"},{default:m(()=>[e("div",de,[l(i,{name:"material-symbols:settings",size:"35"})]),e("div",ce,[e("p",fe,a(t.$t("settings")),1)])]),_:1})])]),e("div",ue,[e("div",me,[l($,{show:r(p),onClose:s[0]||(s[0]=o=>p.value=!1)},null,8,["show"]),e("div",pe,[e("h1",_e,a(t.$t("cards")),1),r(d).cards.length!=0?(f(),u("button",{key:0,onClick:s[1]||(s[1]=o=>p.value=!0),class:"btn btn-sm btn-info"}," + ")):S("",!0)]),e("div",ge,[r(d).cards.length!=0?(f(),u("div",ve,[(f(!0),u(j,null,T(r(d).cards,o=>(f(),u("div",{onClick:A=>B(o)},[e("div",{class:Z(["bg-base-100 p-4 rounded text-primary-content flex items-center justify-between gap-2 cursor-pointer",[o.id==r(g).id&&"border-2 border-primary"]])},[e("div",we,[l(i,{name:"solar:card-bold",size:"30"}),e("div",null,a(o.name),1)]),e("div",{onClick:s[2]||(s[2]=H(()=>{},["stop"])),class:"flex items-center gap-4"},[l(n,{to:"/profile/"+o.id,class:"btn btn-info"},{default:m(()=>[F(a(t.$t("editProfile")),1)]),_:2},1032,["to"]),e("button",{class:"btn btn-warning",onClick:A=>z(o.id)},ye,8,be)])],2)],8,xe))),256))])):(f(),u("div",Ce,[e("div",ke,[e("span",$e,a(t.$t("noCards")),1),e("button",{class:"btn btn-primary",onClick:s[3]||(s[3]=o=>p.value=!0)},a(t.$t("linkCard")),1)])]))])]),l(h,{show:r(_),title:"Unlink Card",body:"Are you sure you want to unlink this card",type:"danger",positive:"Yes unlink this card",onClose:s[4]||(s[4]=o=>_.value=!1),onConfirm:M},null,8,["show"]),e("div",je,[e("div",ze,a(t.$t("views")),1),e("div",Me,[e("canvas",{class:"lg:w-[40rem]",ref_key:"canvas",ref:w,id:"visitors"},null,512)])])])]),_:1})],64)}}};export{Pe as default};
