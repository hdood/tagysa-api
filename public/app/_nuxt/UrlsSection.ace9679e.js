var E=Object.defineProperty;var O=(m,e,o)=>e in m?E(m,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):m[e]=o;var x=(m,e,o)=>(O(m,typeof e!="symbol"?e+"":e,o),o);import R from"./Icon.b24af752.js";import{_ as U}from"./Button.vue.c5de807b.js";import{_ as T}from"./ConfirmModal.vue.60d95f77.js";import{a2 as I,G as J,M as G,l as r,J as $,x as C,V as H,o as g,f as L,z as a,u as l,i as t,A as B,t as p,m as F,y as Y,c as K,P as N}from"./entry.31ce47f0.js";import{u as b}from"./profile.e0543e88.js";import{_ as Q}from"./TextInput.69b88b03.js";import{V as W}from"./ValidateUrl.c73b707c.js";import{q as X,h as D,U as Z,Y as ee,S as te}from"./transition.b7c2c384.js";import"./links.53241500.js";import{d as se}from"./vuedraggable.umd.a4b984b7.js";import"./config.58c8a7ce.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./micro-task.c8661f31.js";import"./_commonjsHelpers.042e6b4d.js";const le=I(),k=J(le).provide.axios;class ae{constructor(){x(this,"all",r([]));x(this,"addLink",async(e,o,n,v)=>{await k.post("/api/urls/"+v,{name:e,link:o,order:n}),$().refreshFrame()});x(this,"getAllLinks",async e=>{let o=await k.get("/api/urls/"+e);this.all.value=o.data});x(this,"deleteLink",async e=>{await k.delete(`/api/urls/${e}`)});x(this,"reorder",async()=>{const e=Array.from(this.all.value,(o,n)=>({id:o.id,order:n}));k.post("/api/urls/reorder",{urls:JSON.stringify(e)}),$().refreshFrame()});x(this,"updateLink",async(e,o,n)=>{await k.patch(`/api/urls/${e}`,{name:o,url:n})})}}const A=G("urls",()=>new ae),oe={class:"w-full rounded-xl px-2 flex flex-col bg-base-300 p-2 shadow text-base-content"},ne={class:"flex items-center gap-3 justify-between"},ie={class:"flex items-center gap-5"},re={class:"flex gap-2 items-center"},ce={class:"text-xs"},de={class:"flex gap-2 items-center"},ue={__name:"Url",props:{link:Object},emits:["updatedInput"],setup(m,{emit:e}){const o=m,n=$(),v=A(),i=r(!1),{activeProfile:c}=C(b()),{link:s}=H(o);async function d(){try{await v.deleteLink(s.value.id),await v.getAllLinks(c.value.id),n.refreshFrame()}catch(h){console.log(h)}}return(h,f)=>{const u=T,y=R,w=U;return g(),L("div",oe,[a(u,{show:l(i),title:"Delete Link",body:"Are you sure you want to delete this link",type:"danger",positive:"Delete",onClose:f[0]||(f[0]=_=>i.value=!1),onConfirm:d},null,8,["show"]),t("div",ne,[t("div",ie,[a(y,{name:"mdi:drag",size:"35",class:"cursor-move handle"}),t("div",re,[a(y,{size:"40",name:"material-symbols:link"}),t("div",null,[t("div",null,B(l(s).name),1),t("div",ce,B(l(s).link),1)])])]),a(w,{type:"danger",class:"px-2 h-10 justify-self-end",onClick:f[1]||(f[1]=_=>i.value=!0)},{default:p(()=>[t("div",de,[a(y,{size:"25",name:"ic:round-delete"})])]),_:1})])])}}},me=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),pe={class:"fixed inset-0 overflow-y-auto"},fe={class:"flex min-h-full items-center justify-center p-4 text-center"},_e=t("span",null,"Add Link",-1),ve={class:""},he={class:"mt-5 min-h-[10rem] flex flex-col items-center justify-between h-full"},xe={class:"space-y-3"},ye={class:"w-full flex justify-end gap-3 my-4"},we=t("div",{class:"flex items-center"},[t("span",null,"Add Link")],-1),ke={__name:"UrlsModal",props:["show"],emits:["close","select"],setup(m,{emit:e}){const o=m,n=A(),v=$(),i=r(""),c=r({}),s=r(""),d=r({}),h=r(!1);r(!1);const{activeProfile:f}=C(b());F(async()=>{await b().fetchProfile(Y().params.id)});function u(){s.value="",i.value="",e("close")}async function y(){var w;if(d.value={},s.value==""){d.value={url:["please specify a url for this link"]};return}if(!W(s.value)){d.value={url:["url field must be a valid url"]};return}if(!((w=s==null?void 0:s.value)!=null&&w.includes("https"))&&s.value&&(s.value="https://"+s.value),i.value==""){d.value={text:["Name field is required"]};return}h.value=!0;try{const _=await n.addLink(i.value,s.value,n.all.length,f.value.id);await n.getAllLinks(f.value.id),s.value="",i.value="",v.refreshFrame()}catch(_){d.value=_.response.data.errors}u(),h.value=!1}return(w,_)=>{const M=Q,q=U;return g(),K(l(te),{appear:"",show:o.show,as:"div"},{default:p(()=>[a(l(X),{as:"div",onClose:u,class:"relative z-10"},{default:p(()=>[a(l(D),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[me]),_:1}),t("div",pe,[t("div",fe,[a(l(D),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:p(()=>[a(l(Z),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-base-200 p-6 text-left align-middle shadow-xl transition-all"},{default:p(()=>{var P,V,j,z;return[a(l(ee),{as:"div",class:"text-lg font-medium leading-6 text-base-content"},{default:p(()=>[_e]),_:1}),t("div",ve,[t("div",he,[t("div",xe,[a(M,{class:"w-[20rem]",input:l(s),"onUpdate:input":_[0]||(_[0]=S=>N(s)?s.value=S:null),label:"URL",placeholder:l(c).default,error:(V=(P=l(d))==null?void 0:P.url)==null?void 0:V[0]},null,8,["input","placeholder","error"]),a(M,{class:"w-[20rem]",input:l(i),"onUpdate:input":_[1]||(_[1]=S=>N(i)?i.value=S:null),label:"Name",placeholder:"Display text",error:(z=(j=l(d))==null?void 0:j.text)==null?void 0:z[0]},null,8,["input","error"])]),t("div",ye,[t("button",{onClick:u}," Cancel "),a(q,{class:"px-2 h-10",loading:l(h),type:"primary",onClick:y},{default:p(()=>[we]),_:1},8,["loading"])])])])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}},ge={class:"w-full"},$e={class:"mx-auto pb-24 py-3 flex flex-col items-center"},be={key:0,class:"mt-4 px-3 w-full flex justify-between"},Le=t("span",{class:"text-2xl opacity-75 font-medium"},"Your Links",-1),Se={class:"flex items-center"},Ue={key:1,class:"mt-8 mx-2 text-xl font-medium w-full text-center"},Ce=t("div",null,"You don't have any links",-1),Ae={class:"flex items-center"},Me=t("span",null,"Add Link",-1),Je={__name:"UrlsSection",setup(m){const e=A();$(),r({name:"Platform",icon:""}),r(""),r(!1),r({});const{activeProfile:o}=C(b()),n=r(!1);async function v(i){await e.reorder()}return F(async()=>{await b().fetchProfile(Y().params.id),await e.getAllLinks(o.value.id)}),(i,c)=>{const s=R,d=U,h=ue,f=ke;return g(),L("div",ge,[t("div",$e,[l(e).all.length!=0?(g(),L("div",be,[Le,t("div",null,[a(d,{type:"info",class:"h-10 w-full px-8 mx-auto",onClick:c[0]||(c[0]=u=>n.value=!0)},{default:p(()=>[t("div",Se,[a(s,{size:"25",name:"material-symbols:add"})])]),_:1})])])):(g(),L("div",Ue,[Ce,a(d,{type:"info",class:"h-10 px-8 mx-auto mt-3",onClick:c[1]||(c[1]=u=>n.value=!0)},{default:p(()=>[t("div",Ae,[Me,a(s,{size:"25",name:"material-symbols:add"})])]),_:1})])),a(l(se),{modelValue:l(e).all,"onUpdate:modelValue":c[2]||(c[2]=u=>l(e).all=u),"component-data":{class:"w-full"},tag:"div","item-key":"nothing",handle:".handle","ghost-class":"bg-base-200",onEnd:v},{item:p(({element:u})=>[a(h,{link:u,class:"mt-3"},null,8,["link"])]),_:1},8,["modelValue"])]),a(f,{show:l(n),onClose:c[3]||(c[3]=u=>n.value=!1)},null,8,["show"])])}}};export{Je as default};
