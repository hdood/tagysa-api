import{_ as V}from"./TextInput.cd397967.js";import{_ as $}from"./Button.vue.d5db2e11.js";import{N as k,a2 as C,G as F,l as n,J as M,x as R,m as D,y as I,e as L,o as j,f as z,i as t,z as p,u as e,P as m,O as E,Q as G,A as J,t as O,C as Q,T as q}from"./entry.0dead6c9.js";import{u as y}from"./profile.d188215a.js";import"./Icon.d83697d0.js";import"./config.5b6e1a52.js";import"./_plugin-vue_export-helper.c27b6911.js";const H={id:"ProfileSection",class:"w-full bg-base-200 rounded-lg"},K=["onSubmit"],W={class:"w-full rounded-3xl p-6"},X={for:"bio",class:"flex flex-col mt-5 gap-1"},Y=t("span",{class:"text-sm font-medium"},"About me",-1),Z={class:"flex items-center justify-end text-[#676B5F] text-[13px]"},ee={class:"w-full"},ue={__name:"BioSection",setup(te){const{successNotification:w}=k(),S=C(),N=F(S).provide.axios,c=n(!1),f=n(!1),v=M(),{activeProfile:u}=R(y()),l=n(""),s=n(""),i=n(""),T=n(!1),a=n({});D(async()=>{await y().fetchProfile(I().params.id),B()});function B(){l.value=u.value.name,i.value=u.value.designation,s.value=u.value.bio}const P=async()=>{var d;a.value=[];try{f.value=!0,c.value=!0,await N.patch(`/api/profiles/${u.value.id}`,{name:l.value,bio:s.value,designation:i.value}),await v.getUser(),w("bio content updated successfully"),v.refreshFrame(),T.value=!1}catch(o){a.value=(d=o.response.data)==null?void 0:d.errors}f.value=!1,c.value=!1},U=L(()=>s.value?s.value.length:0);return(d,o)=>{var _,g,b,h;const x=V,A=$;return j(),z("div",H,[t("form",{onSubmit:q(P,["prevent"])},[t("div",W,[t("div",null,[p(x,{class:"mt-4",placeholder:" Name",input:e(l),"onUpdate:input":o[0]||(o[0]=r=>m(l)?l.value=r:null),rounded:!0,label:"Full Name",inputType:"text",error:e(a)&&((_=e(a))!=null&&_.name)?(g=e(a))==null?void 0:g.name[0]:""},null,8,["input","error"])]),t("div",null,[p(x,{class:"mt-4",placeholder:"Title",input:e(i),"onUpdate:input":o[1]||(o[1]=r=>m(i)?i.value=r:null),rounded:!0,label:"Title",inputType:"text",error:e(a)&&((b=e(a))!=null&&b.designation)?(h=e(a))==null?void 0:h.designation[0]:""},null,8,["input","error"])]),t("label",X,[Y,E(t("textarea",{class:"textarea textarea-primary text-sm w-full py-3.5 px-3",placeholder:"About me","onUpdate:modelValue":o[2]||(o[2]=r=>m(s)?s.value=r:null),rows:"4",maxlength:"300",id:"bio"},null,512),[[G,e(s)]])]),t("div",Z,J(e(U))+"/300",1),t("div",ee,[p(A,{type:"primary",loading:e(c),class:"p-2 w-44 block mx-auto"},{default:O(()=>[Q(" Save Bio ")]),_:1},8,["loading"])])])],40,K)])}}};export{ue as default};
