import{J as F,l as i,K as m,m as N,e as U,s as V,o as H,f as M,z as s,t as d,i as e,T as O,u as a,P as b,O as $,Q as j,A,C as _,F as D,H as z}from"./entry.e6c86e49.js";import{_ as G}from"./Logo.38fb1d48.js";import{_ as I}from"./TextInput.37de0393.js";import{_ as J}from"./nuxt-link.a20e0e92.js";import{_ as K}from"./Button.vue.05625655.js";import{i as Q}from"./googleProvider.da8280de.js";import{u as Y}from"./social.a2232511.js";import{u as q}from"./auth.ecb47842.js";import{u as W}from"./links.017dacac.js";import"./Icon.142946e4.js";import"./config.dcd7f8ed.js";import"./_plugin-vue_export-helper.c27b6911.js";const X=e("title",null,"Login",-1),Z={class:"flex flex-col items-center justify-center gap-4 min-h-screen p-3 bg-base-200"},ee={class:"bg-base-100 flex rounded-xl shadow-md overflow-hidden"},te={class:"flex flex-col items-center justify-center w-full gap-6 py-3 px-7 lg:min-w-fit lg:w-[30rem]"},oe=e("div",{class:"space-y-3"},[e("div",{class:"text-2xl font-medium text-center text-primary"},"Login")],-1),se=["onSubmit"],ae={class:""},ne={class:"form-control w-full max-w-xs"},re=e("label",{class:"label"},[e("span",{class:"label-text"},"Password")],-1),le={class:"label"},ie={class:"text-error"},ue={class:"label-text-alt link-hover"},ce=e("div",{class:"w-full text-center"},"Or",-1),de={class:"text-sm text-right"},ke={__name:"login",setup(pe){const y=F(),f=Y(),S=q();W();const g=i(null),L=m(),n=i(""),r=i(""),u=i({email:"",password:""}),l=i(!1);N(async()=>{(await Q()).useRenderButton({useOneTap:!0,element:g.value,onError:()=>console.error("Failed to render button"),onSuccess:async o=>(l.value=!0,await f.googleLogin(o)?await m().push("/admin"):(f.error="You're not signed up",await m().push("/register")),l.value=!0,!0)})()});const k=U(()=>n.value!=""&&r.value!=""),B=async()=>{var c,t;l.value=!0,u.value={email:"",password:""};try{await S.login(n.value,r.value),await y.getUser(),await L.push("/dashboard")}catch(o){u.value=(t=(c=o==null?void 0:o.response)==null?void 0:c.data)==null?void 0:t.errors}l.value=!1};return(c,t)=>{var v,w,x,h;const o=z,E=G,P=I,T=J,R=K,C=V("RouterLink");return H(),M(D,null,[s(o,null,{default:d(()=>[X]),_:1}),e("div",Z,[e("div",null,[s(E,{class:"w-20 h-20"})]),e("div",ee,[e("div",te,[oe,e("form",{onSubmit:O(B,["prevent"])},[e("div",ae,[s(P,{label:"Email",input:a(n),"onUpdate:input":t[0]||(t[0]=p=>b(n)?n.value=p:null),placeholder:"Email eg: test@test.com",error:(w=(v=a(u))==null?void 0:v.email)==null?void 0:w[0]},null,8,["input","error"]),e("div",ne,[re,$(e("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=p=>b(r)?r.value=p:null),placeholder:"Password",inputType:"email",class:"input input-bordered input-primary w-full max-w-xs"},null,512),[[j,a(r)]]),e("label",le,[e("span",ie,A((h=(x=a(u))==null?void 0:x.password)==null?void 0:h[0]),1),e("span",ue,[s(T,{to:"/forgot-password"},{default:d(()=>[_("Forgot password?")]),_:1})])])])]),s(R,{type:a(k)?"primary":"disabled",loading:a(l),class:"mt-3 w-full"},{default:d(()=>[_("Log in")]),_:1},8,["type","loading"])],40,se),ce,e("div",{id:"buttonEL",ref_key:"buttonEl",ref:g},null,512),e("div",de,[s(C,{to:"/register",class:"text-base underline"},{default:d(()=>[_("Create account")]),_:1})])])])])],64)}}};export{ke as default};
