import C from"./Icon.30ff5d8a.js";import{_ as $}from"./nuxt-link.d0fe6817.js";import{_ as B}from"./Button.vue.650e005c.js";import{s as N,B as S,x as A,o,f as s,i as t,p as l,m as a,u as r,F as f,r as O,j as c,y as _,q as p}from"./entry.6ed29bba.js";import{u as R}from"./orders.05dfa27b.js";import"./config.7dd18642.js";import"./_plugin-vue_export-helper.c27b6911.js";const V={class:"p-4"},j={class:"bg-base-100 p-4 rounded-lg w-11/12 mx-auto overflow-x-scroll lg:overflow-x-hidden"},D={key:0},M={key:1,class:"table"},Y=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Status"),t("th",null,"Date"),t("th",null,"Address"),t("th",null,"Card type"),t("th")])],-1),F={class:""},L={key:0},T={key:1},q=["id"],z={method:"dialog",class:"modal-box"},E=t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"}," ✕ ",-1),I=t("h3",{class:"font-bold text-lg"},"Cancel Order",-1),G=t("p",{class:"py-4"},"Are you sure you want to cancel this order?",-1),H={class:"w-full flex justify-end"},J=["id"],K={method:"dialog",class:"modal-box"},P=t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"}," ✕ ",-1),Q=t("h3",{class:"font-bold text-lg"},"Order Received",-1),U=t("p",{class:"py-4"},"Confirm receiving the order please",-1),W={class:"w-full flex justify-end"},X=t("tfoot",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Status"),t("th",null,"Date"),t("th",null,"Address"),t("th",null,"Card type"),t("th")])],-1),it={__name:"orders",setup(Z){const h=R(),{orders:m}=N(h),{fetchAll:u,cancel:g,confirmReceiving:y}=h,n=S(!1);async function b(i){n.value=!0,await g(i),await u(),n.value=!1}async function v(i){n.value=!0,await y(i),await u(),n.value=!1}return A(async()=>{await u()}),(i,tt)=>{const k=C,x=$,d=B;return o(),s(f,null,[t("div",V,[l(x,{to:"/admin/nfc"},{default:a(()=>[l(k,{name:"ic:round-arrow-back",size:"45",class:"p-1 cursor-pointer hover:bg-base-300 rounded-md"})]),_:1})]),t("div",j,[r(m).length==0?(o(),s("div",D,"You didn't order yet")):(o(),s("table",M,[Y,t("tbody",null,[(o(!0),s(f,null,O(r(m),e=>(o(),s("tr",{key:e.id,class:"hover:bg-base-200 cursor-pointer"},[t("th",null,c(e.id),1),t("td",null,c(e.status),1),t("td",null,c(e.created_at),1),t("td",F,[t("address",null,c(e.address),1)]),t("td",null,c(e.card.type),1),e.status=="paid"?(o(),s("td",L,[l(d,{type:"danger",loading:r(n),onclick:`cancel_modal_${e.id}.showModal()`},{default:a(()=>[_(" Cancel")]),_:2},1032,["loading","onclick"])])):p("",!0),e.status=="delivering"?(o(),s("td",T,[l(d,{type:"primary",loading:r(n),onclick:`confirm_receiving_modal_${e.id}.showModal()`},{default:a(()=>[_(" Confirm receiving")]),_:2},1032,["loading","onclick"])])):p("",!0),t("dialog",{id:`cancel_modal_${e.id}`,class:"modal"},[t("form",z,[E,I,G,t("div",H,[l(d,{type:"danger",onClick:w=>b(e.id)},{default:a(()=>[_("Yes cancel my order")]),_:2},1032,["onClick"])])])],8,q),t("dialog",{id:`confirm_receiving_modal_${e.id}`,class:"modal"},[t("form",K,[P,Q,U,t("div",W,[l(d,{type:"primary",onClick:w=>v(e.id)},{default:a(()=>[_("Yes I received my order")]),_:2},1032,["onClick"])])])],8,J)]))),128))]),X]))])],64)}}};export{it as default};
